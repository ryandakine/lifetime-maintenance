import{j as s,u as N}from"./main-D2OIwsnq.js";import{r}from"./vendor-B6114-rA.js";import{d as O,u as D}from"./redux-CQk40qEf.js";import"./ui-7hvmghxF.js";const L=()=>{const[u,a]=r.useState([]),[c,g]=r.useState(""),[y,f]=r.useState([]),[p,h]=r.useState({}),[z,E]=r.useState([]),[l,m]=r.useState({}),[W,v]=r.useState({}),[n]=r.useState(`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`),[d,F]=r.useState(`Tech_${Math.floor(Math.random()*1e3)}`),S=O(),k=D(e=>{var t;return((t=e.tasks)==null?void 0:t.tasks)||[]}),b=r.useRef(null),o=r.useRef(null);r.useEffect(()=>{const e=()=>{const t=new WebSocket("wss://echo.websocket.org");o.current=t,t.onopen=()=>{console.log("WebSocket connected"),t.send(JSON.stringify({type:"user_join",userId:n,userName:d,timestamp:new Date().toISOString()}))},t.onmessage=i=>{try{const x=JSON.parse(i.data);w(x)}catch(x){console.error("Error parsing WebSocket message:",x)}},t.onclose=()=>{console.log("WebSocket disconnected"),setTimeout(e,3e3)},t.onerror=i=>{console.error("WebSocket error:",i)}};return e(),()=>{o.current&&o.current.close()}},[n,d]);const w=e=>{switch(e.type){case"chat_message":a(t=>[...t,e]);break;case"user_join":f(t=>[...t.filter(i=>i.userId!==e.userId),e]),a(t=>[...t,{type:"system",content:`${e.userName} joined the session`,timestamp:e.timestamp}]);break;case"user_leave":f(t=>t.filter(i=>i.userId!==e.userId)),a(t=>[...t,{type:"system",content:`${e.userName} left the session`,timestamp:e.timestamp}]);break;case"typing_start":h(t=>({...t,[e.userId]:e.userName}));break;case"typing_stop":h(t=>{const i={...t};return delete i[e.userId],i});break;case"task_update":R(e);break;case"cursor_move":v(t=>({...t,[e.userId]:e.position}));break;default:console.log("Unknown message type:",e.type)}},j=()=>{if(!c.trim()||!o.current)return;const e={type:"chat_message",userId:n,userName:d,content:c,timestamp:new Date().toISOString()};o.current.send(JSON.stringify(e)),g("")},I=e=>{if(!o.current)return;const t={type:e?"typing_start":"typing_stop",userId:n,userName:d,timestamp:new Date().toISOString()};o.current.send(JSON.stringify(t))},R=e=>{e.taskId&&S(N({id:e.taskId,...e.changes}))},T=e=>{m(t=>({...t,[e]:n})),o.current&&o.current.send(JSON.stringify({type:"start_editing",userId:n,userName:d,taskId:e,timestamp:new Date().toISOString()}))},C=e=>{m(t=>{const i={...t};return delete i[e],i}),o.current&&o.current.send(JSON.stringify({type:"stop_editing",userId:n,userName:d,taskId:e,timestamp:new Date().toISOString()}))},_=()=>{var e;(e=b.current)==null||e.scrollIntoView({behavior:"smooth"})};return r.useEffect(()=>{_()},[u]),s.jsxs("div",{className:"real-time-collaboration",style:{display:"grid",gridTemplateColumns:"1fr 300px",gap:"20px",height:"calc(100vh - 200px)",padding:"20px"},children:[s.jsxs("div",{style:{display:"flex",flexDirection:"column",background:"white",borderRadius:"15px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",overflow:"hidden"},children:[s.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsxs("div",{children:[s.jsx("h2",{style:{margin:0,fontSize:"1.5rem"},children:"ðŸ¤ Real-Time Collaboration"}),s.jsxs("p",{style:{margin:"5px 0 0 0",opacity:.9},children:[y.length," team members online"]})]}),s.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[s.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",background:"#4CAF50",animation:"pulse 2s infinite"}}),s.jsx("span",{children:"Live"})]})]}),s.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #eee",maxHeight:"300px",overflowY:"auto"},children:[s.jsx("h3",{style:{margin:"0 0 15px 0",color:"#333"},children:"ðŸ“‹ Collaborative Tasks"}),s.jsx("div",{style:{display:"grid",gap:"10px"},children:k.slice(0,5).map(e=>s.jsxs("div",{style:{border:"1px solid #e0e0e0",borderRadius:"8px",padding:"15px",background:l[e.id]?"#f0f8ff":"white",position:"relative"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[s.jsx("h4",{style:{margin:0,color:"#333"},children:e.title}),s.jsxs("div",{style:{display:"flex",gap:"5px",alignItems:"center"},children:[l[e.id]&&s.jsx("span",{style:{fontSize:"12px",color:"#2196F3",fontWeight:"bold"},children:"ðŸ”’ Being edited"}),s.jsx("button",{onClick:()=>l[e.id]?C(e.id):T(e.id),style:{background:l[e.id]?"#f44336":"#4CAF50",color:"white",border:"none",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:l[e.id]?"Stop Editing":"Start Editing"})]})]}),s.jsx("p",{style:{margin:"0 0 10px 0",color:"#666",fontSize:"14px"},children:e.description}),s.jsxs("div",{style:{display:"flex",gap:"10px",fontSize:"12px"},children:[s.jsx("span",{style:{background:"#e3f2fd",color:"#1976d2",padding:"2px 8px",borderRadius:"12px"},children:e.status}),s.jsx("span",{style:{background:"#fff3e0",color:"#f57c00",padding:"2px 8px",borderRadius:"12px"},children:e.priority})]})]},e.id))})]}),s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",padding:"20px"},children:[s.jsx("h3",{style:{margin:"0 0 15px 0",color:"#333"},children:"ðŸ’¬ Team Chat"}),s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"10px",background:"#f8f9fa",borderRadius:"8px",marginBottom:"15px"},children:[u.map((e,t)=>s.jsx("div",{style:{marginBottom:"10px",padding:"10px",background:e.type==="system"?"#fff3cd":e.userId===n?"#d4edda":"white",borderRadius:"8px",borderLeft:e.type==="system"?"4px solid #ffc107":e.userId===n?"4px solid #28a745":"4px solid #007bff"},children:e.type==="system"?s.jsx("div",{style:{textAlign:"center",color:"#856404",fontSize:"12px"},children:e.content}):s.jsxs("div",{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[s.jsxs("strong",{style:{color:"#333"},children:[e.userName,e.userId===n&&" (You)"]}),s.jsx("span",{style:{fontSize:"12px",color:"#666"},children:new Date(e.timestamp).toLocaleTimeString()})]}),s.jsx("div",{style:{color:"#333"},children:e.content})]})},t)),s.jsx("div",{ref:b})]}),Object.keys(p).length>0&&s.jsxs("div",{style:{padding:"5px 10px",fontSize:"12px",color:"#666",fontStyle:"italic"},children:[Object.values(p).join(", ")," ",Object.keys(p).length===1?"is":"are"," typing..."]}),s.jsxs("div",{style:{display:"flex",gap:"10px"},children:[s.jsx("input",{type:"text",value:c,onChange:e=>{g(e.target.value),I(e.target.value.length>0)},onKeyPress:e=>{e.key==="Enter"&&j()},placeholder:"Type your message...",style:{flex:1,padding:"10px",border:"1px solid #ddd",borderRadius:"6px",fontSize:"14px"}}),s.jsx("button",{onClick:j,style:{background:"#007bff",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Send"})]})]})]}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[s.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[s.jsx("h3",{style:{margin:"0 0 15px 0",color:"#333"},children:"ðŸ‘¥ Online Team"}),s.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.map(e=>s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px",background:"#f8f9fa",borderRadius:"8px"},children:[s.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#4CAF50"}}),s.jsxs("span",{style:{fontWeight:"500",color:"#333"},children:[e.userName,e.userId===n&&" (You)"]})]},e.userId))})]}),s.jsxs("div",{style:{background:"white",borderRadius:"15px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",flex:1},children:[s.jsx("h3",{style:{margin:"0 0 15px 0",color:"#333"},children:"ðŸ“Š Live Activity"}),s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",fontSize:"14px"},children:[s.jsxs("div",{style:{padding:"10px",background:"#e8f5e8",borderRadius:"6px",borderLeft:"4px solid #4CAF50"},children:[s.jsx("strong",{children:"Task Updated"}),s.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"Treadmill maintenance task modified by Tech_123"})]}),s.jsxs("div",{style:{padding:"10px",background:"#fff3e0",borderRadius:"6px",borderLeft:"4px solid #FF9800"},children:[s.jsx("strong",{children:"Photo Uploaded"}),s.jsx("div",{style:{color:"#666",fontSize:"12px"},children:"New equipment photo added by Tech_456"})]}),s.jsxs("div",{style:{padding:"10px",background:"#e3f2fd",borderRadius:"6px",borderLeft:"4px solid #2196F3"},children:[s.jsx("strong",{children:"Voice Command"}),s.jsx("div",{style:{color:"#666",fontSize:"12px"},children:'"Create task for elliptical repair" by Tech_789'})]})]})]})]}),s.jsx("style",{children:`
        @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.5; }
          100% { opacity: 1; }
        }
      `})]})};export{L as default};
//# sourceMappingURL=RealTimeCollaboration-8rU0QE8S.js.map
