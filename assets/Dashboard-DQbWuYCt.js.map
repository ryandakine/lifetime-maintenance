{"version":3,"file":"Dashboard-DQbWuYCt.js","sources":["../../src/components/Dashboard.jsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, memo } from 'react'\nimport { useSelector } from 'react-redux'\nimport './Dashboard.css'\n\nconst Dashboard = memo(() => {\n  const [workflowResults, setWorkflowResults] = useState([])\n  const [isLoading, setIsLoading] = useState(false)\n  \n  // Add safety check for Redux store\n  const tasks = useSelector(state => {\n    try {\n      return state?.tasks?.tasks || []\n    } catch (error) {\n      console.warn('Error accessing tasks from Redux store:', error)\n      return []\n    }\n  })\n  \n  const shoppingItems = useSelector(state => {\n    try {\n      const shopping = state?.shopping || {}\n      return [...(shopping.mainList || []), ...(shopping.miscList || [])]\n    } catch (error) {\n      console.warn('Error accessing shopping items from Redux store:', error)\n      return []\n    }\n  })\n\n  // Memoized workflow trigger function\n  const triggerWorkflow = useCallback(async (workflowType, data) => {\n    setIsLoading(true)\n    try {\n      const response = await fetch(`/api/n8n/${workflowType}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(data)\n      })\n      const result = await response.json()\n      \n      setWorkflowResults(prev => [...prev, {\n        id: Date.now(),\n        type: workflowType,\n        data,\n        result,\n        timestamp: new Date().toISOString()\n      }])\n      \n      return result\n    } catch (error) {\n      // console.error('Workflow error:', error)\n      setWorkflowResults(prev => [...prev, {\n        id: Date.now(),\n        type: workflowType,\n        data,\n        error: error.message,\n        timestamp: new Date().toISOString()\n      }])\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  // Memoized quick action handlers\n  const handleEmailWorkflow = useCallback(async () => {\n    const emailData = {\n      topic: 'Maintenance Update',\n      recipient: 'team@lifetimefitness.com',\n      urgency: 'normal'\n    }\n    await triggerWorkflow('email-automation', emailData)\n  }, [triggerWorkflow])\n\n  const handleAIWorkflow = useCallback(async () => {\n    const aiData = {\n      message: 'What maintenance tasks should I prioritize today?',\n      context: 'fitness-facility-maintenance'\n    }\n    await triggerWorkflow('ai-assistant', aiData)\n  }, [triggerWorkflow])\n\n  const handleTaskAnalysis = useCallback(async () => {\n    const taskData = {\n      description: 'Check treadmill maintenance schedule',\n      priority: 'high',\n      equipment: 'treadmill'\n    }\n    await triggerWorkflow('task-processing', taskData)\n  }, [triggerWorkflow])\n\n  const handlePhotoAnalysis = useCallback(async () => {\n    const photoData = {\n      description: 'Equipment damage assessment',\n      category: 'equipment-maintenance'\n    }\n    await triggerWorkflow('photo-analysis', photoData)\n  }, [triggerWorkflow])\n\n  const handleShoppingAnalysis = useCallback(async () => {\n    const shoppingData = {\n      item: 'treadmill belt',\n      quantity: 1,\n      urgency: 'medium'\n    }\n    await triggerWorkflow('shopping-processing', shoppingData)\n  }, [triggerWorkflow])\n\n  // Memoized computed values for better performance\n  const statusStats = useMemo(() => ({\n    activeTasks: tasks?.length || 0,\n    shoppingItems: shoppingItems?.length || 0,\n    maintenanceDue: 5, // This could be computed from actual maintenance data\n    photosDocumented: 12 // This could be computed from actual photo data\n  }), [tasks?.length, shoppingItems?.length])\n\n  const recentWorkflows = useMemo(() => \n    workflowResults.slice(-5).reverse(),\n    [workflowResults]\n  )\n\n  // Add loading state for initial render\n  if (!tasks || !shoppingItems) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '200px',\n        fontSize: '1.1rem',\n        color: '#666'\n      }}>\n        Loading dashboard...\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"dashboard\">\n      <div className=\"dashboard-header\">\n        <h2>üèãÔ∏è Maintenance Dashboard</h2>\n        <p>Quick access to maintenance workflows and status</p>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"quick-actions\">\n        <h3>‚ö° Quick Actions</h3>\n        <div className=\"action-grid\">\n          <button \n            className=\"action-button\"\n            onClick={handleEmailWorkflow}\n            disabled={isLoading}\n          >\n            üìß Send Email\n          </button>\n          \n          <button \n            className=\"action-button\"\n            onClick={handleAIWorkflow}\n            disabled={isLoading}\n          >\n            ü§ñ AI Assistant\n          </button>\n          \n          <button \n            className=\"action-button\"\n            onClick={handleTaskAnalysis}\n            disabled={isLoading}\n          >\n            üìã Analyze Task\n          </button>\n          \n          <button \n            className=\"action-button\"\n            onClick={handlePhotoAnalysis}\n            disabled={isLoading}\n          >\n            üì∏ Photo Analysis\n          </button>\n          \n          <button \n            className=\"action-button\"\n            onClick={handleShoppingAnalysis}\n            disabled={isLoading}\n          >\n            üõí Shopping Analysis\n          </button>\n        </div>\n      </div>\n\n      {/* Status Overview */}\n      <div className=\"status-overview\">\n        <h3>üìä Status Overview</h3>\n        <div className=\"status-grid\">\n          <div className=\"status-card\">\n            <h4>üìã Tasks</h4>\n            <p className=\"status-number\">{statusStats.activeTasks}</p>\n            <p className=\"status-label\">Active Tasks</p>\n          </div>\n          \n          <div className=\"status-card\">\n            <h4>üõí Shopping</h4>\n            <p className=\"status-number\">{statusStats.shoppingItems}</p>\n            <p className=\"status-label\">Items Needed</p>\n          </div>\n          \n          <div className=\"status-card\">\n            <h4>üîß Maintenance</h4>\n            <p className=\"status-number\">{statusStats.maintenanceDue}</p>\n            <p className=\"status-label\">Due This Week</p>\n          </div>\n          \n          <div className=\"status-card\">\n            <h4>üì∏ Photos</h4>\n            <p className=\"status-number\">{statusStats.photosDocumented}</p>\n            <p className=\"status-label\">Documented</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Workflow Results */}\n      <div className=\"workflow-results\">\n        <h3>üîÑ Recent Workflows</h3>\n        {workflowResults.length === 0 ? (\n          <p className=\"no-results\">No workflows triggered yet. Use the quick actions above to get started!</p>\n        ) : (\n          <div className=\"results-list\">\n            {recentWorkflows.map(result => (\n              <div key={result.id} className={`result-item ${result.error ? 'error' : 'success'}`}>\n                <div className=\"result-header\">\n                  <span className=\"result-type\">{result.type}</span>\n                  <span className=\"result-time\">\n                    {new Date(result.timestamp).toLocaleTimeString()}\n                  </span>\n                </div>\n                <div className=\"result-content\">\n                  {result.error ? (\n                    <p className=\"error-message\">‚ùå {result.error}</p>\n                  ) : (\n                    <p className=\"success-message\">‚úÖ Workflow completed successfully</p>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Loading Indicator */}\n      {isLoading && (\n        <div className=\"loading-overlay\">\n          <div className=\"loading-spinner\"></div>\n          <p>Processing workflow...</p>\n        </div>\n      )}\n    </div>\n  )\n})\n\nDashboard.displayName = 'Dashboard'\n\nexport default Dashboard"],"names":["Dashboard","memo","workflowResults","setWorkflowResults","useState","isLoading","setIsLoading","tasks","useSelector","state","_a","error","shoppingItems","shopping","triggerWorkflow","useCallback","workflowType","data","result","prev","handleEmailWorkflow","handleAIWorkflow","handleTaskAnalysis","handlePhotoAnalysis","handleShoppingAnalysis","statusStats","useMemo","recentWorkflows","jsx","jsxs"],"mappings":"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"}