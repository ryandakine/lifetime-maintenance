{"version":3,"file":"Photos-Bd5V8Yum.js","sources":["../../src/hooks/useCamera.js","../../src/components/Photos.jsx"],"sourcesContent":["import { useState, useRef, useEffect, useCallback } from 'react'\n\n/**\n * Custom hook for camera functionality\n * Extracted from Photos.jsx for reusability and reduced file complexity\n */\nexport const useCamera = (onPhotoCapture) => {\n    const videoRef = useRef(null)\n    const canvasRef = useRef(null)\n\n    const [cameraState, setCameraState] = useState({\n        isAvailable: false,\n        isActive: false,\n        stream: null,\n        error: null\n    })\n\n    // Check camera availability on mount\n    useEffect(() => {\n        checkCameraAvailability()\n    }, [])\n\n    // Cleanup camera stream on unmount\n    useEffect(() => {\n        return () => {\n            if (cameraState.stream) {\n                cameraState.stream.getTracks().forEach(track => track.stop())\n            }\n        }\n    }, [cameraState.stream])\n\n    const checkCameraAvailability = useCallback(() => {\n        const hasMediaDevices = navigator.mediaDevices && navigator.mediaDevices.getUserMedia\n        const cameraAvailable = hasMediaDevices && navigator.mediaDevices.enumerateDevices\n\n        console.log('Camera access: ' + (hasMediaDevices ? 'available' : 'not available'))\n\n        setCameraState(prev => ({\n            ...prev,\n            isAvailable: Boolean(cameraAvailable),\n            error: !hasMediaDevices ? 'Camera not available' : null\n        }))\n\n        return Boolean(cameraAvailable)\n    }, [])\n\n    const startCamera = useCallback(async () => {\n        try {\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n                throw new Error('Camera API not supported')\n            }\n\n            const stream = await navigator.mediaDevices.getUserMedia({\n                video: {\n                    facingMode: 'environment', // Use back camera on mobile\n                    width: { ideal: 1280 },\n                    height: { ideal: 720 }\n                }\n            })\n\n            if (videoRef.current) {\n                videoRef.current.srcObject = stream\n            }\n\n            setCameraState(prev => ({\n                ...prev,\n                isActive: true,\n                stream,\n                error: null\n            }))\n\n            console.log('Camera started successfully')\n            return true\n\n        } catch (error) {\n            console.error('Camera access error:', error)\n            setCameraState(prev => ({\n                ...prev,\n                isActive: false,\n                error: error.message\n            }))\n            return false\n        }\n    }, [])\n\n    const stopCamera = useCallback(() => {\n        if (cameraState.stream) {\n            cameraState.stream.getTracks().forEach(track => track.stop())\n        }\n\n        setCameraState(prev => ({\n            ...prev,\n            isActive: false,\n            stream: null\n        }))\n    }, [cameraState.stream])\n\n    const capturePhoto = useCallback(() => {\n        if (!videoRef.current || !canvasRef.current) return null\n\n        const video = videoRef.current\n        const canvas = canvasRef.current\n        const context = canvas.getContext('2d')\n\n        // Set canvas size to match video\n        canvas.width = video.videoWidth\n        canvas.height = video.videoHeight\n\n        // Draw video frame to canvas\n        context.drawImage(video, 0, 0, canvas.width, canvas.height)\n\n        // Convert canvas to blob and create file\n        return new Promise((resolve) => {\n            canvas.toBlob((blob) => {\n                if (blob) {\n                    const file = new File([blob], `camera-photo-${Date.now()}.jpg`, { type: 'image/jpeg' })\n\n                    // Stop camera after capture\n                    stopCamera()\n\n                    // Call the callback if provided\n                    if (onPhotoCapture) {\n                        onPhotoCapture(file)\n                    }\n\n                    resolve(file)\n                } else {\n                    resolve(null)\n                }\n            }, 'image/jpeg', 0.8)\n        })\n    }, [stopCamera, onPhotoCapture])\n\n    return {\n        // Refs for video and canvas elements\n        videoRef,\n        canvasRef,\n\n        // State\n        isAvailable: cameraState.isAvailable,\n        isActive: cameraState.isActive,\n        error: cameraState.error,\n\n        // Actions\n        checkCameraAvailability,\n        startCamera,\n        stopCamera,\n        capturePhoto\n    }\n}\n\nexport default useCamera\n","import React, { useState, useEffect, useRef } from 'react'\nimport { supabase, TABLES, API_KEYS } from '../lib/supabase'\nimport { useCamera } from '../hooks/useCamera'\nimport {\n  Camera,\n  Upload,\n  Check,\n  X,\n  Brain,\n  RotateCcw,\n  Trash2,\n  FileText,\n  AlertCircle,\n  CheckCircle,\n  Clock,\n  RefreshCw,\n  Video,\n  Image,\n  HelpCircle,\n  ArrowRight,\n  Shield,\n  Mic,\n  Square,\n  MessageSquare,\n  Star,\n  Tag,\n  Folder,\n  Search,\n  Filter\n} from 'lucide-react'\n\nconst Photos = () => {\n  console.log('Rendering Photos')\n\n  // Camera hook\n  const camera = useCamera((capturedFile) => {\n    // Callback when photo is captured\n    setPhotoUpload(prev => ({ ...prev, photo: capturedFile }))\n    processPhotoFile(capturedFile, 'camera')\n  })\n\n  const [photos, setPhotos] = useState([])\n  const [tasks, setTasks] = useState([])\n  const [equipment, setEquipment] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [message, setMessage] = useState({ type: '', text: '' })\n  const [isOnline, setIsOnline] = useState(navigator.onLine)\n\n  const [photoUpload, setPhotoUpload] = useState({\n    photo: null,\n    photoUrl: '',\n    selectedTaskId: '',\n    purpose: 'clarification', // 'clarification', 'next_steps', 'verify_done', 'enhanced_analysis'\n    analysis: '',\n    loading: false,\n    showForm: false,\n    cameraMode: false,\n    uploadMode: 'file', // 'camera' or 'file'\n    uploadType: 'file' // 'camera' or 'file' for database\n  })\n\n  // Voice input state\n  const [isListening, setIsListening] = useState(false)\n  const [transcript, setTranscript] = useState('')\n  const [listeningTimeout, setListeningTimeout] = useState(null)\n  const [showVoiceModal, setShowVoiceModal] = useState(false)\n  const [voiceModalText, setVoiceModalText] = useState('')\n  const [voiceModalListening, setVoiceModalListening] = useState(false)\n  const [voiceModalRecognitionRef, setVoiceModalRecognitionRef] = useState(null)\n\n  // AI features state\n  const [aiSuggestions, setAiSuggestions] = useState([])\n  const [photoTags, setPhotoTags] = useState([])\n  const [searchQuery, setSearchQuery] = useState('')\n  const [filteredPhotos, setFilteredPhotos] = useState([])\n  const [showAnalytics, setShowAnalytics] = useState(false)\n\n  // Mobile enhancements state\n  const [offlinePhotos, setOfflinePhotos] = useState([])\n  const [isOffline, setIsOffline] = useState(!navigator.onLine)\n  const [annotationMode, setAnnotationMode] = useState(false)\n  const [annotations, setAnnotations] = useState([])\n  const [currentAnnotation, setCurrentAnnotation] = useState(null)\n  const [annotationCanvas, setAnnotationCanvas] = useState(null)\n\n  // Pagination state\n  const [photosPage, setPhotosPage] = useState(0)\n  const [hasMorePhotos, setHasMorePhotos] = useState(true)\n  const PHOTOS_PAGE_SIZE = 20\n\n\n\n  // Check online status\n  useEffect(() => {\n    const handleOnline = () => {\n      setIsOnline(true)\n      setIsOffline(false)\n      syncOfflinePhotos()\n    }\n    const handleOffline = () => {\n      setIsOnline(false)\n      setIsOffline(true)\n    }\n\n    window.addEventListener('online', handleOnline)\n    window.addEventListener('offline', handleOffline)\n\n    return () => {\n      window.removeEventListener('online', handleOnline)\n      window.removeEventListener('offline', handleOffline)\n    }\n  }, [])\n\n  // Load offline photos from localStorage\n  useEffect(() => {\n    loadOfflinePhotos()\n  }, [])\n\n  // Load photos and tasks on component mount\n  useEffect(() => {\n    loadPhotos()\n    loadTasks()\n    loadEquipment()\n  }, [])\n\n  const handleUploadModeChange = (mode) => {\n    console.log('Upload mode: ' + mode)\n\n    // Stop camera if switching from camera mode\n    if (photoUpload.cameraMode && mode === 'file') {\n      camera.stopCamera()\n    }\n\n    setPhotoUpload(prev => ({\n      ...prev,\n      uploadMode: mode,\n      uploadType: mode,\n      cameraMode: mode === 'camera',\n      photo: null,\n      photoUrl: '',\n      analysis: ''\n    }))\n  }\n\n  const getPurposeLabel = (purpose) => {\n    switch (purpose) {\n      case 'clarification': return 'Clarification'\n      case 'next_steps': return 'Next Steps'\n      case 'verify_done': return 'Verify Done'\n      case 'enhanced_analysis': return 'Enhanced AI Analysis'\n      default: return 'Clarification'\n    }\n  }\n\n  const getPurposeIcon = (purpose) => {\n    switch (purpose) {\n      case 'clarification': return <HelpCircle size={16} />\n      case 'next_steps': return <ArrowRight size={16} />\n      case 'verify_done': return <Shield size={16} />\n      case 'enhanced_analysis': return <Brain size={16} />\n      default: return <HelpCircle size={16} />\n    }\n  }\n\n  const handleStartCamera = async () => {\n    const success = await camera.startCamera()\n    if (success) {\n      setPhotoUpload(prev => ({\n        ...prev,\n        cameraMode: true,\n        showForm: true\n      }))\n    } else {\n      showMessage('error', 'Camera access failed, using file upload instead')\n      setPhotoUpload(prev => ({\n        ...prev,\n        cameraMode: false,\n        uploadMode: 'file',\n        uploadType: 'file',\n        showForm: true\n      }))\n    }\n  }\n\n  const handleStopCamera = () => {\n    camera.stopCamera()\n    setPhotoUpload(prev => ({\n      ...prev,\n      cameraMode: false,\n      showForm: false,\n      photo: null,\n      photoUrl: '',\n      analysis: '',\n      selectedTaskId: '',\n      uploadMode: 'file',\n      uploadType: 'file'\n    }))\n  }\n\n  const processPhotoFile = async (file, type = 'file') => {\n    try {\n      setPhotoUpload(prev => ({ ...prev, loading: true }))\n\n      // Check if offline and save locally if needed\n      if (isOffline) {\n        await saveOfflinePhoto(file, photoUpload.purpose)\n        setPhotoUpload(prev => ({ ...prev, loading: false }))\n        return\n      }\n\n      // Upload to Supabase Storage\n      const fileName = `project-photos/${Date.now()}_${file.name}`\n      const { data, error } = await supabase.storage\n        .from('photos')\n        .upload(fileName, file)\n\n      if (error) throw error\n\n      const { data: { publicUrl } } = supabase.storage\n        .from('photos')\n        .getPublicUrl(fileName)\n\n      setPhotoUpload(prev => ({ ...prev, photoUrl: publicUrl }))\n\n      // Analyze photo based on purpose\n      if (photoUpload.purpose === 'enhanced_analysis') {\n        // Use enhanced AI analysis for equipment recognition and damage detection\n        const enhancedResult = await analyzePhotoWithEnhancedAI(publicUrl, type)\n        setPhotoUpload(prev => ({\n          ...prev,\n          analysis: JSON.stringify(enhancedResult, null, 2),\n          loading: false\n        }))\n        showMessage('success', 'Enhanced AI analysis completed successfully')\n      } else {\n        // Use standard analysis for other purposes\n        await analyzePhotoWithGrok(publicUrl, type, photoUpload.purpose)\n      }\n\n    } catch (error) {\n      console.error('Error processing photo:', error)\n\n      // If online upload fails, save offline\n      if (!isOffline) {\n        console.log('Upload failed, saving offline...')\n        await saveOfflinePhoto(file, photoUpload.purpose)\n      } else {\n        showMessage('error', 'Failed to process photo')\n      }\n\n      setPhotoUpload(prev => ({ ...prev, loading: false }))\n    }\n  }\n\n  const loadPhotos = async (reset = true) => {\n    try {\n      setLoading(true)\n      const page = reset ? 0 : photosPage\n      const from = page * PHOTOS_PAGE_SIZE\n      const to = from + PHOTOS_PAGE_SIZE - 1\n\n      const { data, error, count } = await supabase\n        .from('photos')\n        .select('*', { count: 'exact' })\n        .eq('user_id', 'current-user') // Replace with actual user ID\n        .order('created_at', { ascending: false })\n        .range(from, to)\n\n      if (error) throw error\n\n      if (reset) {\n        setPhotos(data || [])\n        setPhotosPage(1)\n      } else {\n        setPhotos(prev => [...prev, ...(data || [])])\n        setPhotosPage(page + 1)\n      }\n\n      // Check if there are more photos to load\n      const totalLoaded = reset ? (data?.length || 0) : (photos.length + (data?.length || 0))\n      setHasMorePhotos(count > totalLoaded)\n\n      console.log(`Photos loaded: ${data?.length || 0} (total: ${count})`)\n    } catch (error) {\n      console.error('Error loading photos:', error)\n      showMessage('error', 'Failed to load photos')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const loadMorePhotos = async () => {\n    if (!hasMorePhotos || loading) return\n    await loadPhotos(false)\n  }\n\n  const loadTasks = async () => {\n    try {\n      const { data, error } = await supabase\n        .from(TABLES.TASKS)\n        .select('id, task_list, status')\n        .eq('user_id', 'current-user')\n        .order('created_at', { ascending: false })\n\n      if (error) throw error\n      setTasks(data || [])\n    } catch (error) {\n      console.error('Error loading tasks:', error)\n    }\n  }\n\n  const loadEquipment = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('equipment')\n        .select('*')\n        .eq('user_id', 'current-user')\n        .order('created_at', { ascending: false })\n\n      if (error) throw error\n      setEquipment(data || [])\n      console.log('Equipment loaded:', data?.length || 0)\n    } catch (error) {\n      console.error('Error loading equipment:', error)\n    }\n  }\n\n  const handlePhotoUpload = async (e) => {\n    const file = e.target.files[0]\n    if (!file) return\n\n    await processPhotoFile(file, 'file')\n  }\n\n  const analyzePhotoWithGrok = async (photoUrl, type = 'file', purpose = 'clarification') => {\n    try {\n      const grokApiKey = API_KEYS.GROK_PRO\n\n      if (!grokApiKey || grokApiKey === 'your-grok-key') {\n        console.warn('Grok Pro API key not configured, using fallback analysis')\n        setPhotoUpload({\n          ...photoUpload,\n          analysis: 'Photo analysis requires Grok Pro API key configuration.',\n          loading: false\n        })\n        return\n      }\n\n      // Get task context if selected\n      let taskContext = ''\n      if (photoUpload.selectedTaskId) {\n        const task = tasks.find(t => t.id === photoUpload.selectedTaskId)\n        if (task) {\n          taskContext = `\\n\\nRelated Task: ${task.task_list}`\n        }\n      }\n\n      // Enhanced AI Analysis with Equipment Recognition & Damage Detection\n      let prompt = ''\n      switch (purpose) {\n        case 'clarification':\n          prompt = `üîç ENHANCED AI ANALYSIS - Equipment Recognition & Damage Detection\n\nAnalyze this maintenance/repair photo with advanced computer vision capabilities.\n\n${taskContext}\n\n## EQUIPMENT RECOGNITION\n1. Identify the type of fitness equipment (treadmill, elliptical, weight machine, etc.)\n2. Determine the brand and model if visible\n3. Assess confidence level in equipment identification (0-100%)\n4. Identify specific components visible in the photo\n\n## DAMAGE DETECTION & ASSESSMENT\n1. Detect any visible damage (cracks, rust, wear, loose parts, frayed cables)\n2. Assess damage severity: LOW, MEDIUM, HIGH, CRITICAL\n3. Identify affected components (belts, motors, bearings, cables, structural parts)\n4. Detect safety hazards or potential failure points\n\n## DETAILED ANALYSIS\n1. Describe what you see in the photo\n2. Identify the main issue or maintenance need\n3. Explain what might be causing the problem\n4. Provide context about the situation\n5. Highlight any safety concerns\n\nFormat your response as:\n## üèãÔ∏è Equipment Identification\n- **Type**: [Equipment type with confidence %]\n- **Brand/Model**: [If identifiable]\n- **Components Visible**: [List visible components]\n\n## ‚ö†Ô∏è Damage Assessment\n- **Severity Level**: [LOW/MEDIUM/HIGH/CRITICAL]\n- **Damage Types**: [List detected damage]\n- **Affected Components**: [Specific components with issues]\n- **Safety Hazards**: [Any safety concerns]\n\n## üîç Issue Analysis\n[Describe what you see and identify the main issue]\n\n## üìã Problem Description\n[Explain what might be causing the problem]\n\n## üõ°Ô∏è Safety Notes\n[Highlight any safety concerns or considerations]\n\n## ‚ùì Questions for Clarification\n[Ask specific questions to better understand the situation]`\n          break\n\n        case 'next_steps':\n          prompt = `üîç ENHANCED AI ANALYSIS - Equipment Recognition & Damage Detection\n\nAnalyze this maintenance/repair photo and provide specific next steps based on equipment type and damage assessment.\n\n${taskContext}\n\n## EQUIPMENT RECOGNITION\n1. Identify the type of fitness equipment\n2. Determine brand and model if visible\n3. Assess confidence level in equipment identification\n4. Identify specific components that need attention\n\n## DAMAGE ASSESSMENT\n1. Evaluate damage severity and type\n2. Identify critical vs. non-critical issues\n3. Assess safety implications\n4. Determine repair priority\n\n## NEXT STEPS ANALYSIS\n1. Identify what needs to be done next\n2. Provide step-by-step instructions specific to the equipment type\n3. List required tools and supplies\n4. Include safety precautions\n5. Estimate time and difficulty\n\nFormat your response as:\n## üèãÔ∏è Equipment Context\n- **Type**: [Equipment type with confidence %]\n- **Brand/Model**: [If identifiable]\n- **Components Involved**: [Components needing attention]\n\n## ‚ö†Ô∏è Damage Assessment\n- **Severity**: [LOW/MEDIUM/HIGH/CRITICAL]\n- **Issues**: [List of detected problems]\n- **Safety Level**: [Safe/Moderate/Unsafe]\n\n## üìã Next Steps Required\n[Identify what needs to be done next]\n\n## üîß Step-by-Step Instructions\n1. [First step - equipment specific]\n2. [Second step - equipment specific]\n3. [Continue as needed]\n\n## üõ†Ô∏è Required Tools & Supplies\n[List all tools and supplies needed for this equipment type]\n\n## üõ°Ô∏è Safety Precautions\n[Include safety measures specific to this equipment]\n\n## ‚è±Ô∏è Time & Difficulty Estimate\n[Estimate time required and difficulty level]\n\n## üìù Additional Notes\n[Any other important information]`\n          break\n\n        case 'verify_done':\n          prompt = `üîç ENHANCED AI ANALYSIS - Equipment Recognition & Damage Detection\n\nAnalyze this maintenance/repair photo and verify if the work has been completed correctly for the specific equipment type.\n\n${taskContext}\n\n## EQUIPMENT VERIFICATION\n1. Confirm equipment type and components\n2. Verify that the correct components were addressed\n3. Check for any missed areas or components\n\n## QUALITY ASSESSMENT\n1. Assess if the work appears complete and correct\n2. Evaluate workmanship quality\n3. Check for proper installation/repair\n4. Verify safety standards compliance\n\n## DAMAGE RESOLUTION\n1. Confirm that identified damage has been addressed\n2. Check for any remaining issues\n3. Assess if repairs are adequate\n4. Verify no new damage was introduced\n\nFormat your response as:\n## üèãÔ∏è Equipment Verification\n- **Type**: [Equipment type]\n- **Components Addressed**: [List components that were worked on]\n- **Work Scope**: [What was supposed to be done]\n\n## ‚úÖ Work Verification\n[Assess if the work appears complete and correct]\n\n## üéØ Quality Assessment\n[Evaluate the quality of workmanship]\n\n## ‚ö†Ô∏è Issues Found (if any)\n[List any issues or incomplete work]\n\n## üîß Suggested Fixes (if needed)\n[Provide specific fixes for any issues]\n\n## üõ°Ô∏è Safety Compliance\n[Verify safety standards and compliance]\n\n## üìä Final Status\n‚úÖ Work Complete and Correct\n‚ö†Ô∏è Work Needs Attention\n‚ùå Work Incomplete\n\n## üìã Recommendations\n[Final recommendations and next actions]`\n          break\n\n        default:\n          prompt = `üîç ENHANCED AI ANALYSIS - Equipment Recognition & Damage Detection\n\nAnalyze this maintenance/repair photo with advanced computer vision capabilities.\n\n${taskContext}\n\n## EQUIPMENT RECOGNITION\n1. Identify the type of fitness equipment\n2. Determine brand and model if visible\n3. Assess confidence level in equipment identification\n4. Identify specific components visible\n\n## DAMAGE DETECTION\n1. Detect any visible damage or wear\n2. Assess damage severity\n3. Identify affected components\n4. Detect safety hazards\n\n## GENERAL ANALYSIS\nProvide comprehensive analysis of the photo including equipment context, damage assessment, and maintenance recommendations.`\n      }\n\n      console.log(`Photo analyzed for ${purpose}`)\n\n      const response = await fetch('https://api.grok.x.ai/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${grokApiKey}`\n        },\n        body: JSON.stringify({\n          model: 'grok-beta',\n          messages: [\n            {\n              role: 'user',\n              content: [\n                {\n                  type: 'text',\n                  text: prompt\n                },\n                {\n                  type: 'image_url',\n                  image_url: {\n                    url: photoUrl\n                  }\n                }\n              ]\n            }\n          ],\n          max_tokens: 1000\n        })\n      })\n\n      if (!response.ok) {\n        const errorText = await response.text()\n        console.error('Grok Pro API error:', response.status, errorText)\n        throw new Error(`Grok Pro API error: ${response.status}`)\n      }\n\n      const result = await response.json()\n      const analysis = result.choices[0].message.content\n\n      // Save to Supabase photos table with purpose and upload type\n      const { error: saveError } = await supabase\n        .from('photos')\n        .insert({\n          user_id: 'current-user',\n          photo_url: photoUrl,\n          task_id: photoUpload.selectedTaskId || null,\n          response: analysis,\n          purpose: purpose,\n          upload_type: type,\n          created_at: new Date().toISOString()\n        })\n\n      if (saveError) {\n        console.error('Error saving photo analysis:', saveError)\n      }\n\n      setPhotoUpload({\n        ...photoUpload,\n        analysis,\n        loading: false\n      })\n\n      console.log(`Photo uploaded and analyzed with Grok Pro (type: ${type}, purpose: ${purpose})`)\n      showMessage('success', 'Photo uploaded and analyzed successfully')\n\n      // Reload photos list\n      await loadPhotos()\n\n    } catch (error) {\n      console.error('Error analyzing photo:', error)\n      showMessage('error', 'Failed to analyze photo')\n      setPhotoUpload({ ...photoUpload, loading: false })\n    }\n  }\n\n  // Enhanced AI Analysis - Equipment Recognition & Damage Detection\n  const analyzePhotoWithEnhancedAI = async (photoUrl, type = 'file') => {\n    try {\n      const grokApiKey = API_KEYS.GROK_PRO\n\n      if (!grokApiKey || grokApiKey === 'your-grok-key') {\n        console.warn('Grok Pro API key not configured, using fallback analysis')\n        return {\n          equipment: { type: 'Unknown', confidence: 0, brand: 'Unknown', model: 'Unknown' },\n          damage: { severity: 'UNKNOWN', types: [], components: [], safetyHazards: [] },\n          analysis: 'Enhanced AI analysis requires Grok Pro API key configuration.'\n        }\n      }\n\n      const enhancedPrompt = `üîç ADVANCED COMPUTER VISION ANALYSIS - Equipment Recognition & Damage Detection\n\nAnalyze this fitness equipment photo with specialized computer vision capabilities for maintenance and safety assessment.\n\n## EQUIPMENT RECOGNITION REQUIREMENTS\n1. Identify the specific type of fitness equipment (treadmill, elliptical, weight machine, exercise bike, etc.)\n2. Determine the brand and model if visible or identifiable\n3. Assess confidence level in equipment identification (0-100%)\n4. Identify all visible components and parts\n5. Classify equipment category (cardio, strength, flexibility, etc.)\n\n## DAMAGE DETECTION REQUIREMENTS\n1. Detect any visible damage types:\n   - Structural damage (cracks, bends, breaks)\n   - Wear and tear (frayed cables, worn belts, rust)\n   - Loose or missing parts\n   - Electrical issues (exposed wires, damaged connectors)\n   - Safety hazards (sharp edges, unstable parts)\n\n2. Assess damage severity levels:\n   - LOW: Minor cosmetic issues, no safety concerns\n   - MEDIUM: Functional issues, some safety concerns\n   - HIGH: Significant damage, safety concerns\n   - CRITICAL: Severe damage, immediate safety hazard\n\n3. Identify affected components:\n   - Belts, motors, bearings, cables\n   - Structural components, safety features\n   - Electrical components, control systems\n\n## SAFETY ASSESSMENT\n1. Identify any immediate safety hazards\n2. Assess equipment stability and structural integrity\n3. Check for electrical safety issues\n4. Evaluate user safety risks\n\n## MAINTENANCE PRIORITY\n1. Determine maintenance urgency\n2. Assess repair complexity\n3. Estimate repair costs and time\n4. Recommend immediate actions\n\nPlease provide your analysis in the following JSON format:\n{\n  \"equipment\": {\n    \"type\": \"string\",\n    \"confidence\": number,\n    \"brand\": \"string\",\n    \"model\": \"string\",\n    \"category\": \"string\",\n    \"components\": [\"array of visible components\"]\n  },\n  \"damage\": {\n    \"severity\": \"LOW|MEDIUM|HIGH|CRITICAL\",\n    \"types\": [\"array of damage types\"],\n    \"components\": [\"array of affected components\"],\n    \"safetyHazards\": [\"array of safety hazards\"]\n  },\n  \"analysis\": {\n    \"description\": \"detailed description of what you see\",\n    \"mainIssue\": \"main problem identified\",\n    \"causes\": [\"potential causes\"],\n    \"safetyLevel\": \"SAFE|MODERATE|UNSAFE\",\n    \"maintenancePriority\": \"LOW|MEDIUM|HIGH|CRITICAL\",\n    \"immediateActions\": [\"list of immediate actions needed\"],\n    \"repairEstimate\": {\n      \"time\": \"estimated repair time\",\n      \"complexity\": \"LOW|MEDIUM|HIGH\",\n      \"cost\": \"estimated cost range\"\n    }\n  }\n}`\n\n      console.log('Starting enhanced AI analysis for equipment recognition and damage detection')\n\n      const response = await fetch('https://api.grok.x.ai/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${grokApiKey}`\n        },\n        body: JSON.stringify({\n          model: 'grok-beta',\n          messages: [\n            {\n              role: 'user',\n              content: [\n                {\n                  type: 'text',\n                  text: enhancedPrompt\n                },\n                {\n                  type: 'image_url',\n                  image_url: {\n                    url: photoUrl\n                  }\n                }\n              ]\n            }\n          ],\n          max_tokens: 2000\n        })\n      })\n\n      if (!response.ok) {\n        const errorText = await response.text()\n        console.error('Enhanced AI analysis error:', response.status, errorText)\n        throw new Error(`Enhanced AI analysis error: ${response.status}`)\n      }\n\n      const result = await response.json()\n      const analysisText = result.choices[0].message.content\n\n      // Try to parse JSON response\n      let enhancedAnalysis = null\n      try {\n        // Extract JSON from the response (it might be wrapped in markdown)\n        const jsonMatch = analysisText.match(/\\{[\\s\\S]*\\}/)\n        if (jsonMatch) {\n          enhancedAnalysis = JSON.parse(jsonMatch[0])\n        } else {\n          throw new Error('No JSON found in response')\n        }\n      } catch (parseError) {\n        console.warn('Failed to parse JSON response, using text analysis:', parseError)\n        enhancedAnalysis = {\n          equipment: { type: 'Unknown', confidence: 0, brand: 'Unknown', model: 'Unknown' },\n          damage: { severity: 'UNKNOWN', types: [], components: [], safetyHazards: [] },\n          analysis: { description: analysisText, mainIssue: 'Analysis completed', safetyLevel: 'UNKNOWN' }\n        }\n      }\n\n      // Save enhanced analysis to database\n      const { error: saveError } = await supabase\n        .from('photos')\n        .insert({\n          user_id: 'current-user',\n          photo_url: photoUrl,\n          task_id: photoUpload.selectedTaskId || null,\n          response: JSON.stringify(enhancedAnalysis),\n          purpose: 'enhanced_analysis',\n          upload_type: type,\n          created_at: new Date().toISOString()\n        })\n\n      if (saveError) {\n        console.error('Error saving enhanced analysis:', saveError)\n      }\n\n      // Auto-generate maintenance tasks from analysis\n      await generateTasksFromAnalysis(enhancedAnalysis, photoUrl)\n\n      console.log('Enhanced AI analysis completed:', enhancedAnalysis)\n      return enhancedAnalysis\n\n    } catch (error) {\n      console.error('Error in enhanced AI analysis:', error)\n      throw error\n    }\n  }\n\n  // Workflow Automation - Auto-generate Tasks from Photo Analysis\n  const generateTasksFromAnalysis = async (analysis, photoUrl) => {\n    try {\n      console.log('üîÑ Starting automated task generation from photo analysis')\n\n      if (!analysis || !analysis.damage || !analysis.analysis) {\n        console.warn('Insufficient analysis data for task generation')\n        return\n      }\n\n      const generatedTasks = []\n      const timestamp = new Date().toISOString()\n\n      // Find or create equipment record\n      let equipmentRecord = equipment.find(e =>\n        e.name.toLowerCase().includes(analysis.equipment.type.toLowerCase()) ||\n        e.type.toLowerCase().includes(analysis.equipment.type.toLowerCase())\n      )\n\n      if (!equipmentRecord) {\n        // Create new equipment record\n        const { data: newEquipment, error: equipmentError } = await supabase\n          .from('equipment')\n          .insert({\n            name: `${analysis.equipment.brand || 'Unknown'} ${analysis.equipment.type}`,\n            type: analysis.equipment.type,\n            brand: analysis.equipment.brand || 'Unknown',\n            model: analysis.equipment.model || 'Unknown',\n            category: analysis.equipment.category || 'Unknown',\n            status: 'active',\n            last_maintenance: null,\n            photo_url: photoUrl,\n            ai_detected: true,\n            created_at: timestamp\n          })\n          .select()\n          .single()\n\n        if (!equipmentError && newEquipment) {\n          equipmentRecord = newEquipment\n          console.log('Created new equipment record:', newEquipment)\n          // Reload equipment list\n          await loadEquipment()\n        }\n      }\n\n      // Generate tasks based on damage severity\n      if (analysis.damage.severity === 'CRITICAL') {\n        const criticalTask = {\n          task_list: `URGENT: ${analysis.equipment.type} - ${analysis.analysis.mainIssue}`,\n          description: `Critical safety issue detected: ${analysis.analysis.description}`,\n          priority: 'high',\n          status: 'pending',\n          due_date: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(), // Due in 24 hours\n          equipment_id: equipmentRecord?.id || analysis.equipment.type,\n          photo_url: photoUrl,\n          ai_generated: true,\n          severity: 'CRITICAL',\n          immediate_actions: analysis.analysis.immediateActions,\n          created_at: timestamp\n        }\n        generatedTasks.push(criticalTask)\n      }\n\n      // Generate tasks based on damage types\n      if (analysis.damage.types && analysis.damage.types.length > 0) {\n        analysis.damage.types.forEach(damageType => {\n          const task = {\n            task_list: `Repair ${analysis.equipment.type} - ${damageType}`,\n            description: `Address ${damageType} on ${analysis.equipment.type}. ${analysis.analysis.description}`,\n            priority: analysis.damage.severity === 'HIGH' ? 'high' : 'medium',\n            status: 'pending',\n            due_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(), // Due in 7 days\n            equipment_id: equipmentRecord?.id || analysis.equipment.type,\n            photo_url: photoUrl,\n            ai_generated: true,\n            severity: analysis.damage.severity,\n            damage_type: damageType,\n            affected_components: analysis.damage.components,\n            created_at: timestamp\n          }\n          generatedTasks.push(task)\n        })\n      }\n\n      // Generate tasks based on immediate actions\n      if (analysis.analysis.immediateActions && analysis.analysis.immediateActions.length > 0) {\n        analysis.analysis.immediateActions.forEach(action => {\n          const task = {\n            task_list: `Immediate Action: ${action}`,\n            description: `Perform immediate action: ${action}. Equipment: ${analysis.equipment.type}`,\n            priority: 'high',\n            status: 'pending',\n            due_date: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString(), // Due in 2 days\n            equipment_id: equipmentRecord?.id || analysis.equipment.type,\n            photo_url: photoUrl,\n            ai_generated: true,\n            action_type: 'immediate',\n            created_at: timestamp\n          }\n          generatedTasks.push(task)\n        })\n      }\n\n      // Generate maintenance schedule task\n      if (analysis.analysis.maintenancePriority !== 'LOW') {\n        const maintenanceTask = {\n          task_list: `Schedule Maintenance: ${analysis.equipment.type}`,\n          description: `Schedule maintenance for ${analysis.equipment.type} based on AI analysis. Priority: ${analysis.analysis.maintenancePriority}`,\n          priority: analysis.analysis.maintenancePriority === 'HIGH' ? 'high' : 'medium',\n          status: 'pending',\n          due_date: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(), // Due in 14 days\n          equipment_id: equipmentRecord?.id || analysis.equipment.type,\n          photo_url: photoUrl,\n          ai_generated: true,\n          maintenance_type: 'scheduled',\n          repair_estimate: analysis.analysis.repairEstimate,\n          created_at: timestamp\n        }\n        generatedTasks.push(maintenanceTask)\n      }\n\n      // Save generated tasks to database\n      if (generatedTasks.length > 0) {\n        const { data: savedTasks, error: taskError } = await supabase\n          .from('tasks')\n          .insert(generatedTasks)\n          .select()\n\n        if (taskError) {\n          console.error('Error saving generated tasks:', taskError)\n        } else {\n          console.log(`‚úÖ Successfully generated ${generatedTasks.length} tasks from photo analysis`)\n          showMessage('success', `Generated ${generatedTasks.length} maintenance tasks from analysis`)\n\n          // Reload tasks list\n          await loadTasks()\n        }\n      }\n\n      return generatedTasks\n\n    } catch (error) {\n      console.error('Error generating tasks from analysis:', error)\n      showMessage('error', 'Failed to generate tasks from analysis')\n    }\n  }\n\n  // Mobile Enhancements - Offline Photo Management\n  const loadOfflinePhotos = () => {\n    try {\n      const stored = localStorage.getItem('offlinePhotos')\n      if (stored) {\n        const photos = JSON.parse(stored)\n        setOfflinePhotos(photos)\n        console.log(`Loaded ${photos.length} offline photos`)\n      }\n    } catch (error) {\n      console.error('Error loading offline photos:', error)\n    }\n  }\n\n  const saveOfflinePhoto = async (file, purpose = 'clarification') => {\n    try {\n      const reader = new FileReader()\n      reader.onload = (e) => {\n        const offlinePhoto = {\n          id: `offline_${Date.now()}`,\n          file: e.target.result,\n          name: file.name,\n          purpose,\n          created_at: new Date().toISOString(),\n          status: 'pending_upload',\n          annotations: []\n        }\n\n        const updatedPhotos = [...offlinePhotos, offlinePhoto]\n        setOfflinePhotos(updatedPhotos)\n        localStorage.setItem('offlinePhotos', JSON.stringify(updatedPhotos))\n\n        console.log('Photo saved offline:', offlinePhoto.id)\n        showMessage('success', 'Photo saved offline - will upload when online')\n      }\n      reader.readAsDataURL(file)\n    } catch (error) {\n      console.error('Error saving offline photo:', error)\n      showMessage('error', 'Failed to save photo offline')\n    }\n  }\n\n  const syncOfflinePhotos = async () => {\n    if (offlinePhotos.length === 0) return\n\n    console.log(`üîÑ Syncing ${offlinePhotos.length} offline photos...`)\n\n    for (const offlinePhoto of offlinePhotos) {\n      try {\n        // Convert base64 back to file\n        const response = await fetch(offlinePhoto.file)\n        const blob = await response.blob()\n        const file = new File([blob], offlinePhoto.name, { type: 'image/jpeg' })\n\n        // Upload to Supabase\n        const fileName = `project-photos/${Date.now()}_${offlinePhoto.name}`\n        const { data, error } = await supabase.storage\n          .from('photos')\n          .upload(fileName, file)\n\n        if (error) throw error\n\n        const { data: { publicUrl } } = supabase.storage\n          .from('photos')\n          .getPublicUrl(fileName)\n\n        // Analyze photo\n        if (offlinePhoto.purpose === 'enhanced_analysis') {\n          await analyzePhotoWithEnhancedAI(publicUrl, 'file')\n        } else {\n          await analyzePhotoWithGrok(publicUrl, 'file', offlinePhoto.purpose)\n        }\n\n        console.log(`‚úÖ Synced offline photo: ${offlinePhoto.id}`)\n      } catch (error) {\n        console.error(`‚ùå Failed to sync offline photo ${offlinePhoto.id}:`, error)\n      }\n    }\n\n    // Clear offline photos after successful sync\n    setOfflinePhotos([])\n    localStorage.removeItem('offlinePhotos')\n    showMessage('success', 'All offline photos synced successfully')\n  }\n\n  // Mobile Enhancements - Annotation Tools\n  const startAnnotationMode = () => {\n    setAnnotationMode(true)\n    showMessage('info', 'Annotation mode enabled - tap to add annotations')\n  }\n\n  const stopAnnotationMode = () => {\n    setAnnotationMode(false)\n    setCurrentAnnotation(null)\n    showMessage('info', 'Annotation mode disabled')\n  }\n\n  const addAnnotation = (x, y, text) => {\n    const annotation = {\n      id: `annotation_${Date.now()}`,\n      x,\n      y,\n      text,\n      timestamp: new Date().toISOString()\n    }\n\n    setAnnotations(prev => [...prev, annotation])\n    setCurrentAnnotation(null)\n\n    console.log('Annotation added:', annotation)\n  }\n\n  const removeAnnotation = (annotationId) => {\n    setAnnotations(prev => prev.filter(a => a.id !== annotationId))\n  }\n\n  const saveAnnotations = () => {\n    if (annotations.length === 0) return\n\n    const annotationData = {\n      photoId: photoUpload.photoUrl,\n      annotations,\n      timestamp: new Date().toISOString()\n    }\n\n    // Save to localStorage for offline access\n    const stored = localStorage.getItem('photoAnnotations') || '{}'\n    const allAnnotations = JSON.parse(stored)\n    allAnnotations[photoUpload.photoUrl] = annotationData\n    localStorage.setItem('photoAnnotations', JSON.stringify(allAnnotations))\n\n    showMessage('success', `Saved ${annotations.length} annotations`)\n    setAnnotations([])\n  }\n\n  const deletePhoto = async (photoId) => {\n    try {\n      const { error } = await supabase\n        .from('photos')\n        .delete()\n        .eq('id', photoId)\n\n      if (error) throw error\n\n      setPhotos(photos.filter(photo => photo.id !== photoId))\n      console.log(`Photo ${photoId} deleted`)\n      showMessage('success', 'Photo deleted')\n    } catch (error) {\n      console.error('Error deleting photo:', error)\n      showMessage('error', 'Failed to delete photo')\n    }\n  }\n\n  const getStatusIcon = (analysis) => {\n    if (analysis.includes('‚úÖ Work Complete and Correct') || analysis.includes('‚úÖ Complete and Correct')) {\n      return <CheckCircle size={16} style={{ color: 'var(--success-color)' }} />\n    } else if (analysis.includes('‚ö†Ô∏è Work Needs Attention') || analysis.includes('‚ö†Ô∏è Needs Attention')) {\n      return <AlertCircle size={16} style={{ color: 'var(--warning-text)' }} />\n    } else if (analysis.includes('‚ùå Work Incomplete') || analysis.includes('üîÑ In Progress')) {\n      return <Clock size={16} style={{ color: 'var(--primary-color)' }} />\n    }\n    return <FileText size={16} />\n  }\n\n  const getStatusColor = (analysis) => {\n    if (analysis.includes('‚úÖ Work Complete and Correct') || analysis.includes('‚úÖ Complete and Correct')) {\n      return 'var(--success-color)'\n    } else if (analysis.includes('‚ö†Ô∏è Work Needs Attention') || analysis.includes('‚ö†Ô∏è Needs Attention')) {\n      return 'var(--warning-color)'\n    } else if (analysis.includes('‚ùå Work Incomplete') || analysis.includes('üîÑ In Progress')) {\n      return 'var(--primary-color)'\n    }\n    return 'var(--secondary-color)'\n  }\n\n  const getUploadTypeIcon = (type) => {\n    return type === 'camera' ? <Camera size={14} /> : <Upload size={14} />\n  }\n\n  const showMessage = (type, text) => {\n    setMessage({ type, text })\n    setTimeout(() => setMessage({ type: '', text: '' }), 5000)\n  }\n\n  // Voice Input Functions\n  const startListening = () => {\n    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {\n      showMessage('error', 'Speech recognition not supported')\n      return\n    }\n\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition\n    const recognition = new SpeechRecognition()\n\n    recognition.continuous = false\n    recognition.interimResults = true\n    recognition.lang = 'en-US'\n\n    recognition.onstart = () => {\n      setIsListening(true)\n      setTranscript('')\n    }\n\n    recognition.onresult = (event) => {\n      let finalTranscript = ''\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        if (event.results[i].isFinal) {\n          finalTranscript += event.results[i][0].transcript\n        }\n      }\n      if (finalTranscript) {\n        setTranscript(finalTranscript)\n        // Process voice command for photo description\n        processVoiceCommand(finalTranscript)\n      }\n    }\n\n    recognition.onend = () => {\n      setIsListening(false)\n    }\n\n    recognition.onerror = (event) => {\n      console.error('Speech recognition error:', event.error)\n      setIsListening(false)\n    }\n\n    // Auto-stop after 30 seconds\n    const timeout = setTimeout(() => {\n      recognition.stop()\n      recognition.abort()\n    }, 30000)\n    setListeningTimeout(timeout)\n\n    recognition.start()\n  }\n\n  const stopListening = () => {\n    if (listeningTimeout) {\n      clearTimeout(listeningTimeout)\n      setListeningTimeout(null)\n    }\n    try {\n      // Stop any active recognition\n      if (window.speechRecognition) {\n        window.speechRecognition.stop()\n        window.speechRecognition.abort()\n      }\n    } catch (error) {\n      console.log('Recognition already stopped')\n    }\n\n    setIsListening(false)\n    showMessage('info', 'Voice input stopped.')\n  }\n\n  const processVoiceCommand = (command) => {\n    const lowerCommand = command.toLowerCase()\n\n    // Voice commands for photo descriptions\n    if (lowerCommand.includes('describe') || lowerCommand.includes('analyze')) {\n      // Add voice description to photo analysis\n      setPhotoUpload(prev => ({\n        ...prev,\n        analysis: prev.analysis + '\\n\\nVoice Description: ' + command\n      }))\n    } else if (lowerCommand.includes('tag') || lowerCommand.includes('label')) {\n      // Extract tags from voice command\n      const tags = command.match(/(?:tag|label)\\s+(.+)/i)?.[1]?.split(/\\s+and\\s+|\\s*,\\s*/) || []\n      setPhotoTags(prev => [...prev, ...tags])\n    } else if (lowerCommand.includes('purpose')) {\n      // Set photo purpose\n      if (lowerCommand.includes('clarification')) {\n        setPhotoUpload(prev => ({ ...prev, purpose: 'clarification' }))\n      } else if (lowerCommand.includes('next steps') || lowerCommand.includes('next step')) {\n        setPhotoUpload(prev => ({ ...prev, purpose: 'next_steps' }))\n      } else if (lowerCommand.includes('verify') || lowerCommand.includes('done')) {\n        setPhotoUpload(prev => ({ ...prev, purpose: 'verify_done' }))\n      }\n    }\n  }\n\n  // Voice Modal Functions\n  const openVoiceModal = () => {\n    setShowVoiceModal(true)\n    setVoiceModalText('')\n  }\n\n  const closeVoiceModal = () => {\n    setShowVoiceModal(false)\n    setVoiceModalText('')\n    if (voiceModalRecognitionRef) {\n      voiceModalRecognitionRef.stop()\n      voiceModalRecognitionRef.abort()\n    }\n  }\n\n  const startVoiceModalListening = () => {\n    if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {\n      showMessage('error', 'Speech recognition not supported')\n      return\n    }\n\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition\n    const recognition = new SpeechRecognition()\n\n    recognition.continuous = false\n    recognition.interimResults = true\n    recognition.lang = 'en-US'\n\n    recognition.onstart = () => {\n      setVoiceModalListening(true)\n    }\n\n    recognition.onresult = (event) => {\n      let finalTranscript = ''\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        if (event.results[i].isFinal) {\n          finalTranscript += event.results[i][0].transcript\n        }\n      }\n      if (finalTranscript) {\n        setVoiceModalText(prev => prev + finalTranscript + ' ')\n      }\n    }\n\n    recognition.onend = () => {\n      setVoiceModalListening(false)\n    }\n\n    recognition.onerror = (event) => {\n      console.error('Speech recognition error:', event.error)\n      setVoiceModalListening(false)\n    }\n\n    recognition.start()\n    setVoiceModalRecognitionRef(recognition)\n  }\n\n  const stopVoiceModalListening = () => {\n    if (voiceModalRecognitionRef) {\n      voiceModalRecognitionRef.stop()\n      voiceModalRecognitionRef.abort()\n      setVoiceModalListening(false)\n    }\n  }\n\n  const applyVoiceModalText = () => {\n    if (voiceModalText.trim()) {\n      setPhotoUpload(prev => ({\n        ...prev,\n        analysis: prev.analysis + '\\n\\nVoice Description: ' + voiceModalText.trim()\n      }))\n      closeVoiceModal()\n    }\n  }\n\n  // AI Suggestions\n  const generateAiSuggestions = async () => {\n    try {\n      const perplexityApiKey = import.meta.env.VITE_PERPLEXITY_API_KEY\n      if (!perplexityApiKey) {\n        console.log('Perplexity API key not configured')\n        return\n      }\n\n      const photoSummary = photos.map(photo => ({\n        purpose: photo.purpose,\n        analysis: photo.analysis,\n        created_at: photo.created_at,\n        task_id: photo.task_id\n      }))\n\n      const response = await fetch('https://api.perplexity.ai/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${perplexityApiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4',\n          messages: [\n            {\n              role: 'user',\n              content: `Analyze this photo collection and provide 3-5 suggestions for improving photo organization, analysis, or workflow. Return as JSON array with 'suggestion' and 'reason' fields. Photos: ${JSON.stringify(photoSummary)}`\n            }\n          ]\n        })\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        const messageContent = data.choices[0].message.content\n        const suggestions = JSON.parse(messageContent)\n        setAiSuggestions(suggestions)\n      }\n    } catch (error) {\n      console.error('Error generating AI suggestions:', error)\n    }\n  }\n\n  // Search and Filter\n  useEffect(() => {\n    if (!searchQuery.trim()) {\n      setFilteredPhotos(photos)\n    } else {\n      const filtered = photos.filter(photo =>\n        photo.analysis?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        photo.purpose?.toLowerCase().includes(searchQuery.toLowerCase())\n      )\n      setFilteredPhotos(filtered)\n    }\n  }, [searchQuery, photos])\n\n  return (\n    <div className=\"container\">\n      {!isOnline && (\n        <div className=\"offline-alert\">\n          ‚ö†Ô∏è You are currently offline. Some features may not work properly.\n        </div>\n      )}\n\n      {message.text && (\n        <div className={`message ${message.type}`}>\n          {message.text}\n        </div>\n      )}\n\n      {/* Photo Upload Section */}\n      <div className=\"card\">\n        <h3>Upload Photo for Project Analysis</h3>\n        <p style={{ color: 'var(--secondary-color)', marginBottom: '1rem' }}>\n          Upload a photo to get clarification, next steps, or verify if work is done correctly.\n        </p>\n\n        {!photoUpload.showForm ? (\n          <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\n            {camera.isAvailable && (\n              <button\n                className=\"btn\"\n                onClick={() => {\n                  handleUploadModeChange('camera')\n                  handleStartCamera()\n                }}\n                title=\"Use camera to take photo\"\n                aria-label=\"Use camera to take photo\"\n              >\n                <Camera size={16} style={{ marginRight: '0.5rem' }} aria-hidden=\"true\" />\n                Use Camera\n              </button>\n            )}\n            <button\n              className=\"btn\"\n              onClick={() => {\n                handleUploadModeChange('file')\n                setPhotoUpload(prev => ({ ...prev, showForm: true }))\n              }}\n              title=\"Upload photo from file\"\n              aria-label=\"Upload photo from file\"\n            >\n              <Upload size={16} style={{ marginRight: '0.5rem' }} aria-hidden=\"true\" />\n              Upload File\n            </button>\n          </div>\n        ) : (\n          <div>\n            <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\n              <button\n                className=\"btn btn-secondary\"\n                onClick={() => {\n                  stopCamera()\n                  setPhotoUpload({\n                    ...photoUpload,\n                    showForm: false,\n                    photo: null,\n                    photoUrl: '',\n                    analysis: '',\n                    selectedTaskId: '',\n                    uploadMode: 'file',\n                    uploadType: 'file',\n                    purpose: 'clarification'\n                  })\n                }}\n              >\n                <X size={16} style={{ marginRight: '0.5rem' }} />\n                Cancel\n              </button>\n            </div>\n\n            {/* Upload Mode Selection */}\n            <fieldset className=\"form-group\" style={{ marginBottom: '1rem', border: 'none', padding: '0' }}>\n              <legend className=\"form-label\" style={{ padding: '0', marginBottom: '0.5rem' }}>Upload Method</legend>\n              <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\n                <label style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  cursor: 'pointer',\n                  padding: '0.5rem 1rem',\n                  borderRadius: '6px',\n                  border: `2px solid ${photoUpload.uploadMode === 'camera' ? 'var(--primary-color)' : 'var(--border-color)'}`,\n                  backgroundColor: photoUpload.uploadMode === 'camera' ? 'var(--primary-color)' : 'transparent',\n                  color: photoUpload.uploadMode === 'camera' ? 'white' : 'var(--text-color)',\n                  transition: 'all 0.2s ease'\n                }}>\n                  <input\n                    type=\"radio\"\n                    name=\"uploadMode\"\n                    value=\"camera\"\n                    checked={photoUpload.uploadMode === 'camera'}\n                    onChange={(e) => handleUploadModeChange(e.target.value)}\n                    style={{ display: 'none' }}\n                    aria-labelledby=\"camera-option\"\n                  />\n                  <Camera size={16} aria-hidden=\"true\" />\n                  <span id=\"camera-option\">Use Camera</span>\n                </label>\n                <label style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  cursor: 'pointer',\n                  padding: '0.5rem 1rem',\n                  borderRadius: '6px',\n                  border: `2px solid ${photoUpload.uploadMode === 'file' ? 'var(--primary-color)' : 'var(--border-color)'}`,\n                  backgroundColor: photoUpload.uploadMode === 'file' ? 'var(--primary-color)' : 'transparent',\n                  color: photoUpload.uploadMode === 'file' ? 'white' : 'var(--text-color)',\n                  transition: 'all 0.2s ease'\n                }}>\n                  <input\n                    type=\"radio\"\n                    name=\"uploadMode\"\n                    value=\"file\"\n                    checked={photoUpload.uploadMode === 'file'}\n                    onChange={(e) => handleUploadModeChange(e.target.value)}\n                    style={{ display: 'none' }}\n                    aria-labelledby=\"file-option\"\n                  />\n                  <Upload size={16} aria-hidden=\"true\" />\n                  <span id=\"file-option\">Upload File</span>\n                </label>\n              </div>\n            </fieldset>\n\n            {/* Purpose Selection */}\n            <div className=\"form-group\" style={{ marginBottom: '1rem' }}>\n              <label className=\"form-label\" htmlFor=\"analysis-purpose\">Analysis Purpose</label>\n              <select\n                id=\"analysis-purpose\"\n                name=\"analysis-purpose\"\n                className=\"form-input\"\n                value={photoUpload.purpose}\n                onChange={(e) => setPhotoUpload({ ...photoUpload, purpose: e.target.value })}\n              >\n                <option value=\"clarification\">\n                  üîç Clarification - Describe the issue\n                </option>\n                <option value=\"next_steps\">\n                  ‚û°Ô∏è Next Steps - Give instructions\n                </option>\n                <option value=\"verify_done\">\n                  ‚úÖ Verify Done - Confirm if work is correct\n                </option>\n              </select>\n            </div>\n\n            {/* Camera Mode */}\n            {photoUpload.cameraMode && (\n              <div style={{ marginBottom: '1rem' }}>\n                <video\n                  ref={camera.videoRef}\n                  autoPlay\n                  playsInline\n                  style={{\n                    width: '100%',\n                    maxWidth: '400px',\n                    borderRadius: '8px',\n                    border: '2px solid var(--border-color)'\n                  }}\n                />\n                <canvas ref={camera.canvasRef} style={{ display: 'none' }} />\n                <div style={{ marginTop: '1rem' }}>\n                  <button\n                    className=\"btn\"\n                    onClick={camera.capturePhoto}\n                    style={{ marginRight: '1rem' }}\n                    title=\"Capture photo with camera\"\n                    aria-label=\"Capture photo with camera\"\n                  >\n                    <Camera size={16} style={{ marginRight: '0.5rem' }} aria-hidden=\"true\" />\n                    Capture Photo\n                  </button>\n                </div>\n              </div>\n            )}\n\n            <div className=\"form-group\">\n              <label className=\"form-label\" htmlFor=\"task-select-photos\">Link to Task (optional)</label>\n              <select\n                id=\"task-select-photos\"\n                name=\"task-select-photos\"\n                className=\"form-input\"\n                value={photoUpload.selectedTaskId}\n                onChange={(e) => setPhotoUpload({ ...photoUpload, selectedTaskId: e.target.value })}\n              >\n                <option value=\"\">Select a task...</option>\n                {tasks.map(task => (\n                  <option key={task.id} value={task.id}>\n                    {task.task_list} ({task.status})\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* File Upload Mode */}\n            {!photoUpload.cameraMode && (\n              <div className=\"form-group\">\n                <label className=\"form-label\" htmlFor=\"photo-file-upload\">Upload Photo</label>\n                <input\n                  id=\"photo-file-upload\"\n                  name=\"photo-file-upload\"\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handlePhotoUpload}\n                  className=\"form-input\"\n                  disabled={photoUpload.loading}\n                />\n              </div>\n            )}\n\n            {photoUpload.photo && (\n              <div style={{ marginTop: '1rem' }}>\n                <img\n                  src={URL.createObjectURL(photoUpload.photo)}\n                  alt=\"Uploaded\"\n                  style={{ maxWidth: '100%', maxHeight: '200px', borderRadius: '8px' }}\n                />\n              </div>\n            )}\n\n            {photoUpload.loading && (\n              <div style={{ marginTop: '1rem', textAlign: 'center' }}>\n                <Brain size={20} style={{ animation: 'spin 1s linear infinite', marginRight: '0.5rem' }} />\n                Analyzing photo for {getPurposeLabel(photoUpload.purpose)}...\n              </div>\n            )}\n\n            {photoUpload.analysis && (\n              <div style={{ marginTop: '1rem' }}>\n                <div style={{\n                  backgroundColor: 'var(--light-color)',\n                  padding: '1rem',\n                  borderRadius: '8px',\n                  whiteSpace: 'pre-wrap',\n                  fontFamily: 'monospace',\n                  fontSize: '0.9rem',\n                  border: '2px solid var(--primary-color)'\n                }}>\n                  {photoUpload.analysis}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Photos List */}\n      <div className=\"card\">\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\n          <h3>Project Photos</h3>\n          <button\n            className=\"btn btn-secondary\"\n            onClick={loadPhotos}\n            disabled={loading}\n            title=\"Refresh photos\"\n            aria-label=\"Refresh photos\"\n          >\n            <RotateCcw size={16} style={{ marginRight: '0.5rem' }} aria-hidden=\"true\" />\n            Refresh\n          </button>\n        </div>\n\n        {loading && photos.length === 0 ? (\n          <div className=\"loading\">Loading photos...</div>\n        ) : photos.length === 0 ? (\n          <p style={{ textAlign: 'center', color: 'var(--secondary-color)' }}>\n            No photos uploaded yet. Upload a photo above to get started!\n          </p>\n        ) : (\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n            {photos.map(photo => {\n              const linkedTask = tasks.find(t => t.id === photo.task_id)\n\n              return (\n                <div key={photo.id} style={{\n                  border: '1px solid var(--border-color)',\n                  borderRadius: '8px',\n                  padding: '1rem',\n                  backgroundColor: 'var(--light-color)'\n                }}>\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\n                    <div style={{ flex: 1 }}>\n                      <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', marginBottom: '0.5rem' }}>\n                        {getStatusIcon(photo.response)}\n                        <span style={{\n                          fontWeight: '600',\n                          color: getStatusColor(photo.response)\n                        }}>\n                          Project Photo\n                        </span>\n                        <span style={{ fontSize: '0.8rem', color: 'var(--secondary-color)' }}>\n                          {new Date(photo.created_at).toLocaleDateString()}\n                        </span>\n                        {photo.purpose && (\n                          <span style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: '0.25rem',\n                            fontSize: '0.8rem',\n                            marginLeft: '0.5rem',\n                            padding: '0.25rem 0.5rem',\n                            backgroundColor: 'var(--primary-color)',\n                            color: 'white',\n                            borderRadius: '4px'\n                          }}>\n                            {getPurposeIcon(photo.purpose)}\n                            {getPurposeLabel(photo.purpose)}\n                          </span>\n                        )}\n                        {photo.upload_type && (\n                          <span style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: '0.25rem',\n                            fontSize: '0.8rem',\n                            color: 'var(--primary-color)',\n                            marginLeft: '0.5rem'\n                          }}>\n                            {getUploadTypeIcon(photo.upload_type)}\n                            {photo.upload_type}\n                          </span>\n                        )}\n                      </div>\n\n                      {linkedTask && (\n                        <div style={{\n                          fontSize: '0.9rem',\n                          color: 'var(--primary-color)',\n                          marginBottom: '0.5rem'\n                        }}>\n                          üìã Linked to: {linkedTask.task_list}\n                        </div>\n                      )}\n                    </div>\n\n                    <button\n                      className=\"btn btn-danger\"\n                      onClick={() => deletePhoto(photo.id)}\n                      style={{ padding: '0.25rem 0.5rem', fontSize: '0.8rem' }}\n                      title=\"Delete photo\"\n                      aria-label=\"Delete photo\"\n                    >\n                      <Trash2 size={14} aria-hidden=\"true\" />\n                    </button>\n                  </div>\n\n                  <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>\n                    <img\n                      src={photo.photo_url}\n                      alt=\"Project\"\n                      style={{\n                        width: '120px',\n                        height: '120px',\n                        objectFit: 'cover',\n                        borderRadius: '6px',\n                        border: '2px solid var(--border-color)'\n                      }}\n                    />\n\n                    <div style={{ flex: 1 }}>\n                      <div style={{\n                        backgroundColor: 'white',\n                        padding: '0.75rem',\n                        borderRadius: '6px',\n                        whiteSpace: 'pre-wrap',\n                        fontFamily: 'monospace',\n                        fontSize: '0.85rem',\n                        maxHeight: '120px',\n                        overflow: 'auto',\n                        border: '2px solid var(--primary-color)'\n                      }}>\n                        {photo.response}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n\n        {/* Load More Button */}\n        {hasMorePhotos && photos.length > 0 && (\n          <button\n            onClick={loadMorePhotos}\n            disabled={loading}\n            className=\"btn btn-primary\"\n            style={{\n              display: 'block',\n              margin: '1rem auto',\n              padding: '0.75rem 2rem',\n              fontSize: '1rem'\n            }}\n          >\n            {loading ? 'Loading...' : 'Load More Photos'}\n          </button>\n        )}\n      </div>\n\n      {/* Voice Input Section */}\n      <div style={{\n        marginTop: '1rem',\n        padding: '1rem',\n        backgroundColor: isListening ? 'var(--warning-color)' : 'var(--light-color)',\n        borderRadius: '8px',\n        border: isListening ? '2px solid var(--warning-color)' : '1px solid var(--border-color)',\n        textAlign: 'center'\n      }}>\n        <h4 style={{\n          marginBottom: '0.5rem',\n          color: isListening ? 'white' : 'var(--primary-color)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          gap: '0.5rem'\n        }}>\n          <Mic size={20} />\n          Voice Photo Description\n        </h4>\n\n        {/* Voice Buttons */}\n        <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', marginBottom: '1rem' }}>\n          <button\n            onClick={isListening ? stopListening : startListening}\n            style={{\n              padding: '1rem 2rem',\n              borderRadius: '50px',\n              border: 'none',\n              backgroundColor: isListening ? '#dc3545' : 'var(--primary-color)',\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: '1.1rem',\n              fontWeight: '600',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              transition: 'all 0.3s ease',\n              boxShadow: isListening ? '0 0 20px rgba(220, 53, 69, 0.5)' : '0 2px 8px rgba(0,0,0,0.1)',\n              animation: isListening ? 'pulse 2s infinite' : 'none'\n            }}\n          >\n            {isListening ? (\n              <>\n                <Square size={20} />\n                STOP LISTENING\n              </>\n            ) : (\n              <>\n                <Mic size={20} />\n                Quick Voice\n              </>\n            )}\n          </button>\n\n          <button\n            onClick={openVoiceModal}\n            style={{\n              padding: '1rem 2rem',\n              borderRadius: '50px',\n              border: '2px solid var(--primary-color)',\n              backgroundColor: 'white',\n              color: 'var(--primary-color)',\n              cursor: 'pointer',\n              fontSize: '1.1rem',\n              fontWeight: '600',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              transition: 'all 0.3s ease'\n            }}\n          >\n            <MessageSquare size={20} />\n            Voice Modal\n          </button>\n        </div>\n\n        {/* Voice Status */}\n        {isListening && (\n          <div style={{\n            color: 'white',\n            fontSize: '0.9rem',\n            marginBottom: '0.5rem',\n            textAlign: 'center',\n            fontWeight: '600'\n          }}>\n            üé§ LISTENING - Click \"STOP LISTENING\" to stop\n          </div>\n        )}\n\n        {/* Voice Transcript */}\n        {transcript && (\n          <div style={{\n            marginTop: '0.5rem',\n            padding: '0.5rem',\n            backgroundColor: 'white',\n            borderRadius: '4px',\n            fontSize: '0.9rem',\n            color: 'var(--text-color)',\n            minHeight: '40px'\n          }}>\n            <strong>You said:</strong> {transcript}\n          </div>\n        )}\n      </div>\n\n      {/* Search and Filter */}\n      <div style={{ marginTop: '1rem', padding: '1rem', backgroundColor: 'var(--light-color)', borderRadius: '8px' }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\n          <h4 style={{ color: 'var(--primary-color)', margin: 0 }}>üîç Search Photos</h4>\n          <div style={{ display: 'flex', gap: '0.5rem', alignItems: 'center' }}>\n            <Search size={16} />\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Search photos by analysis or purpose...\"\n              style={{\n                padding: '0.5rem',\n                borderRadius: '4px',\n                border: '1px solid var(--border-color)',\n                fontSize: '0.9rem',\n                minWidth: '200px'\n              }}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* AI Suggestions */}\n      <div style={{ marginTop: '1rem', padding: '1rem', backgroundColor: 'var(--light-color)', borderRadius: '8px' }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1rem' }}>\n          <h4 style={{ color: 'var(--primary-color)', margin: 0 }}>ü§ñ AI Photo Suggestions</h4>\n          <button\n            onClick={generateAiSuggestions}\n            style={{\n              padding: '0.5rem 1rem',\n              borderRadius: '4px',\n              border: '1px solid var(--border-color)',\n              backgroundColor: 'var(--primary-color)',\n              color: 'white',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem'\n            }}\n          >\n            <Brain size={16} />\n            Get AI Suggestions\n          </button>\n        </div>\n\n        {aiSuggestions.length > 0 && (\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>\n            {aiSuggestions.map((suggestion, index) => (\n              <div key={index} style={{\n                padding: '0.75rem',\n                backgroundColor: 'white',\n                borderRadius: '6px',\n                border: '1px solid var(--border-color)'\n              }}>\n                <div style={{ fontWeight: '500', marginBottom: '0.25rem' }}>{suggestion.suggestion}</div>\n                <div style={{ fontSize: '0.8rem', color: 'var(--secondary-color)' }}>{suggestion.reason}</div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Voice Modal */}\n      {showVoiceModal && (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        }}>\n          <div style={{\n            backgroundColor: 'white',\n            padding: '2rem',\n            borderRadius: '12px',\n            width: '90%',\n            maxWidth: '500px',\n            boxShadow: '0 10px 25px rgba(0, 0, 0, 0.2)'\n          }}>\n            <h3 style={{ marginBottom: '1rem', color: 'var(--primary-color)' }}>üé§ Voice Photo Description</h3>\n\n            <div style={{ marginBottom: '1rem' }}>\n              <textarea\n                value={voiceModalText}\n                onChange={(e) => setVoiceModalText(e.target.value)}\n                placeholder=\"Your voice input will appear here...\"\n                style={{\n                  width: '100%',\n                  minHeight: '100px',\n                  padding: '0.75rem',\n                  borderRadius: '8px',\n                  border: '1px solid var(--border-color)',\n                  fontSize: '0.9rem',\n                  resize: 'vertical'\n                }}\n              />\n            </div>\n\n            <div style={{ display: 'flex', gap: '0.5rem', justifyContent: 'center' }}>\n              <button\n                onClick={voiceModalListening ? stopVoiceModalListening : startVoiceModalListening}\n                style={{\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '8px',\n                  border: 'none',\n                  backgroundColor: voiceModalListening ? '#dc3545' : 'var(--primary-color)',\n                  color: 'white',\n                  cursor: 'pointer',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem'\n                }}\n              >\n                {voiceModalListening ? <Square size={16} /> : <Mic size={16} />}\n                {voiceModalListening ? 'Stop' : 'Start'} Recording\n              </button>\n\n              <button\n                onClick={applyVoiceModalText}\n                disabled={!voiceModalText.trim()}\n                style={{\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '8px',\n                  border: 'none',\n                  backgroundColor: voiceModalText.trim() ? 'var(--success-color)' : 'var(--secondary-color)',\n                  color: 'white',\n                  cursor: voiceModalText.trim() ? 'pointer' : 'not-allowed'\n                }}\n              >\n                Add Description\n              </button>\n\n              <button\n                onClick={closeVoiceModal}\n                style={{\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '8px',\n                  border: '1px solid var(--border-color)',\n                  backgroundColor: 'white',\n                  color: 'var(--text-color)',\n                  cursor: 'pointer'\n                }}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <style jsx>{`\n        @keyframes spin {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default Photos "],"names":["useCamera","onPhotoCapture","videoRef","useRef","canvasRef","cameraState","setCameraState","useState","useEffect","checkCameraAvailability","track","useCallback","hasMediaDevices","cameraAvailable","prev","startCamera","stream","error","stopCamera","capturePhoto","video","canvas","context","resolve","blob","file","Photos","camera","capturedFile","setPhotoUpload","processPhotoFile","photos","setPhotos","tasks","setTasks","equipment","setEquipment","loading","setLoading","message","setMessage","isOnline","setIsOnline","photoUpload","isListening","setIsListening","transcript","setTranscript","listeningTimeout","setListeningTimeout","showVoiceModal","setShowVoiceModal","voiceModalText","setVoiceModalText","voiceModalListening","setVoiceModalListening","voiceModalRecognitionRef","setVoiceModalRecognitionRef","aiSuggestions","setAiSuggestions","photoTags","setPhotoTags","searchQuery","setSearchQuery","filteredPhotos","setFilteredPhotos","showAnalytics","setShowAnalytics","offlinePhotos","setOfflinePhotos","isOffline","setIsOffline","annotationMode","setAnnotationMode","annotations","setAnnotations","currentAnnotation","setCurrentAnnotation","annotationCanvas","setAnnotationCanvas","photosPage","setPhotosPage","hasMorePhotos","setHasMorePhotos","PHOTOS_PAGE_SIZE","handleOnline","syncOfflinePhotos","handleOffline","loadOfflinePhotos","loadPhotos","loadTasks","loadEquipment","handleUploadModeChange","mode","getPurposeLabel","purpose","getPurposeIcon","jsx","HelpCircle","ArrowRight","Shield","Brain","handleStartCamera","showMessage","type","saveOfflinePhoto","fileName","data","supabase","publicUrl","enhancedResult","analyzePhotoWithEnhancedAI","analyzePhotoWithGrok","reset","page","from","to","count","totalLoaded","loadMorePhotos","TABLES","handlePhotoUpload","photoUrl","grokApiKey","API_KEYS","taskContext","task","t","prompt","response","errorText","analysis","saveError","enhancedPrompt","analysisText","enhancedAnalysis","jsonMatch","parseError","generateTasksFromAnalysis","generatedTasks","timestamp","equipmentRecord","e","newEquipment","equipmentError","criticalTask","damageType","action","maintenanceTask","savedTasks","taskError","stored","reader","offlinePhoto","updatedPhotos","deletePhoto","photoId","photo","getStatusIcon","CheckCircle","AlertCircle","Clock","FileText","getStatusColor","getUploadTypeIcon","Camera","Upload","text","startListening","SpeechRecognition","recognition","event","finalTranscript","processVoiceCommand","timeout","stopListening","command","lowerCommand","tags","_b","_a","openVoiceModal","closeVoiceModal","startVoiceModalListening","i","stopVoiceModalListening","applyVoiceModalText","generateAiSuggestions","filtered","jsxs","X","RotateCcw","linkedTask","Trash2","Mic","Fragment","Square","MessageSquare","Search","suggestion","index"],"mappings":"qSAMO,MAAMA,GAAaC,GAAmB,CACzC,MAAMC,EAAWC,EAAAA,OAAO,IAAI,EACtBC,EAAYD,EAAAA,OAAO,IAAI,EAEvB,CAACE,EAAaC,CAAc,EAAIC,WAAS,CAC3C,YAAa,GACb,SAAU,GACV,OAAQ,KACR,MAAO,IACf,CAAK,EAGDC,EAAAA,UAAU,IAAM,CACZC,EAAuB,CAC3B,EAAG,CAAA,CAAE,EAGLD,EAAAA,UAAU,IACC,IAAM,CACLH,EAAY,QACZA,EAAY,OAAO,UAAS,EAAG,QAAQK,GAASA,EAAM,KAAI,CAAE,CAEpE,EACD,CAACL,EAAY,MAAM,CAAC,EAEvB,MAAMI,EAA0BE,EAAAA,YAAY,IAAM,CAC9C,MAAMC,EAAkB,UAAU,cAAgB,UAAU,aAAa,aACnEC,EAAkBD,GAAmB,UAAU,aAAa,iBAElE,eAAQ,IAAI,mBAAqBA,EAAkB,YAAc,gBAAgB,EAEjFN,EAAeQ,IAAS,CACpB,GAAGA,EACH,YAAa,EAAQD,EACrB,MAAQD,EAA2C,KAAzB,sBACtC,EAAU,EAEK,EAAQC,CACnB,EAAG,CAAA,CAAE,EAECE,EAAcJ,EAAAA,YAAY,SAAY,CACxC,GAAI,CACA,GAAI,CAAC,UAAU,cAAgB,CAAC,UAAU,aAAa,aACnD,MAAM,IAAI,MAAM,0BAA0B,EAG9C,MAAMK,EAAS,MAAM,UAAU,aAAa,aAAa,CACrD,MAAO,CACH,WAAY,cACZ,MAAO,CAAE,MAAO,IAAI,EACpB,OAAQ,CAAE,MAAO,GAAG,CACxC,CACA,CAAa,EAED,OAAId,EAAS,UACTA,EAAS,QAAQ,UAAYc,GAGjCV,EAAeQ,IAAS,CACpB,GAAGA,EACH,SAAU,GACV,OAAAE,EACA,MAAO,IACvB,EAAc,EAEF,QAAQ,IAAI,6BAA6B,EAClC,EAEX,OAASC,EAAO,CACZ,eAAQ,MAAM,uBAAwBA,CAAK,EAC3CX,EAAeQ,IAAS,CACpB,GAAGA,EACH,SAAU,GACV,MAAOG,EAAM,OAC7B,EAAc,EACK,EACX,CACJ,EAAG,CAAA,CAAE,EAECC,EAAaP,EAAAA,YAAY,IAAM,CAC7BN,EAAY,QACZA,EAAY,OAAO,UAAS,EAAG,QAAQK,GAASA,EAAM,KAAI,CAAE,EAGhEJ,EAAeQ,IAAS,CACpB,GAAGA,EACH,SAAU,GACV,OAAQ,IACpB,EAAU,CACN,EAAG,CAACT,EAAY,MAAM,CAAC,EAEjBc,EAAeR,EAAAA,YAAY,IAAM,CACnC,GAAI,CAACT,EAAS,SAAW,CAACE,EAAU,QAAS,OAAO,KAEpD,MAAMgB,EAAQlB,EAAS,QACjBmB,EAASjB,EAAU,QACnBkB,EAAUD,EAAO,WAAW,IAAI,EAGtC,OAAAA,EAAO,MAAQD,EAAM,WACrBC,EAAO,OAASD,EAAM,YAGtBE,EAAQ,UAAUF,EAAO,EAAG,EAAGC,EAAO,MAAOA,EAAO,MAAM,EAGnD,IAAI,QAASE,GAAY,CAC5BF,EAAO,OAAQG,GAAS,CACpB,GAAIA,EAAM,CACN,MAAMC,EAAO,IAAI,KAAK,CAACD,CAAI,EAAG,gBAAgB,KAAK,IAAG,CAAE,OAAQ,CAAE,KAAM,YAAY,CAAE,EAGtFN,EAAU,EAGNjB,GACAA,EAAewB,CAAI,EAGvBF,EAAQE,CAAI,CAChB,MACIF,EAAQ,IAAI,CAEpB,EAAG,aAAc,EAAG,CACxB,CAAC,CACL,EAAG,CAACL,EAAYjB,CAAc,CAAC,EAE/B,MAAO,CAEH,SAAAC,EACA,UAAAE,EAGA,YAAaC,EAAY,YACzB,SAAUA,EAAY,SACtB,MAAOA,EAAY,MAGnB,wBAAAI,EACA,YAAAM,EACA,WAAAG,EACA,aAAAC,CACR,CACA,ECtHMO,GAAS,IAAM,CACnB,QAAQ,IAAI,kBAAkB,EAG9B,MAAMC,EAAS3B,GAAW4B,GAAiB,CAEzCC,MAAwB,CAAE,GAAGf,EAAM,MAAOc,GAAe,EACzDE,GAAiBF,EAAc,QAAQ,CACzC,CAAC,EAEK,CAACG,EAAQC,CAAS,EAAIzB,EAAAA,SAAS,CAAA,CAAE,EACjC,CAAC0B,EAAOC,CAAQ,EAAI3B,EAAAA,SAAS,CAAA,CAAE,EAC/B,CAAC4B,EAAWC,CAAY,EAAI7B,EAAAA,SAAS,CAAA,CAAE,EACvC,CAAC8B,EAASC,CAAU,EAAI/B,EAAAA,SAAS,EAAK,EACtC,CAACgC,EAASC,CAAU,EAAIjC,EAAAA,SAAS,CAAE,KAAM,GAAI,KAAM,GAAI,EACvD,CAACkC,EAAUC,CAAW,EAAInC,EAAAA,SAAS,UAAU,MAAM,EAEnD,CAACoC,EAAad,CAAc,EAAItB,WAAS,CAC7C,MAAO,KACP,SAAU,GACV,eAAgB,GAChB,QAAS,gBACT,SAAU,GACV,QAAS,GACT,SAAU,GACV,WAAY,GACZ,WAAY,OACZ,WAAY,MAAA,CACb,EAGK,CAACqC,EAAaC,CAAc,EAAItC,EAAAA,SAAS,EAAK,EAC9C,CAACuC,EAAYC,CAAa,EAAIxC,EAAAA,SAAS,EAAE,EACzC,CAACyC,EAAkBC,CAAmB,EAAI1C,EAAAA,SAAS,IAAI,EACvD,CAAC2C,GAAgBC,CAAiB,EAAI5C,EAAAA,SAAS,EAAK,EACpD,CAAC6C,EAAgBC,CAAiB,EAAI9C,EAAAA,SAAS,EAAE,EACjD,CAAC+C,EAAqBC,CAAsB,EAAIhD,EAAAA,SAAS,EAAK,EAC9D,CAACiD,EAA0BC,EAA2B,EAAIlD,EAAAA,SAAS,IAAI,EAGvE,CAACmD,EAAeC,EAAgB,EAAIpD,EAAAA,SAAS,CAAA,CAAE,EAC/C,CAACqD,GAAWC,EAAY,EAAItD,EAAAA,SAAS,CAAA,CAAE,EACvC,CAACuD,EAAaC,EAAc,EAAIxD,EAAAA,SAAS,EAAE,EAC3C,CAACyD,GAAgBC,CAAiB,EAAI1D,EAAAA,SAAS,CAAA,CAAE,EACjD,CAAC2D,GAAeC,EAAgB,EAAI5D,EAAAA,SAAS,EAAK,EAGlD,CAAC6D,EAAeC,CAAgB,EAAI9D,EAAAA,SAAS,CAAA,CAAE,EAC/C,CAAC+D,EAAWC,EAAY,EAAIhE,EAAAA,SAAS,CAAC,UAAU,MAAM,EACtD,CAACiE,GAAgBC,EAAiB,EAAIlE,EAAAA,SAAS,EAAK,EACpD,CAACmE,GAAaC,EAAc,EAAIpE,EAAAA,SAAS,CAAA,CAAE,EAC3C,CAACqE,GAAmBC,EAAoB,EAAItE,EAAAA,SAAS,IAAI,EACzD,CAACuE,GAAkBC,EAAmB,EAAIxE,EAAAA,SAAS,IAAI,EAGvD,CAACyE,GAAYC,EAAa,EAAI1E,EAAAA,SAAS,CAAC,EACxC,CAAC2E,GAAeC,EAAgB,EAAI5E,EAAAA,SAAS,EAAI,EACjD6E,GAAmB,GAKzB5E,EAAAA,UAAU,IAAM,CACd,MAAM6E,EAAe,IAAM,CACzB3C,EAAY,EAAI,EAChB6B,GAAa,EAAK,EAClBe,GAAA,CACF,EACMC,EAAgB,IAAM,CAC1B7C,EAAY,EAAK,EACjB6B,GAAa,EAAI,CACnB,EAEA,cAAO,iBAAiB,SAAUc,CAAY,EAC9C,OAAO,iBAAiB,UAAWE,CAAa,EAEzC,IAAM,CACX,OAAO,oBAAoB,SAAUF,CAAY,EACjD,OAAO,oBAAoB,UAAWE,CAAa,CACrD,CACF,EAAG,CAAA,CAAE,EAGL/E,EAAAA,UAAU,IAAM,CACdgF,GAAA,CACF,EAAG,CAAA,CAAE,EAGLhF,EAAAA,UAAU,IAAM,CACdiF,EAAA,EACAC,GAAA,EACAC,GAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMC,EAA0BC,GAAS,CACvC,QAAQ,IAAI,gBAAkBA,CAAI,EAG9BlD,EAAY,YAAckD,IAAS,QACrClE,EAAO,WAAA,EAGTE,EAAef,IAAS,CACtB,GAAGA,EACH,WAAY+E,EACZ,WAAYA,EACZ,WAAYA,IAAS,SACrB,MAAO,KACP,SAAU,GACV,SAAU,EAAA,EACV,CACJ,EAEMC,GAAmBC,GAAY,CACnC,OAAQA,EAAA,CACN,IAAK,gBAAiB,MAAO,gBAC7B,IAAK,aAAc,MAAO,aAC1B,IAAK,cAAe,MAAO,cAC3B,IAAK,oBAAqB,MAAO,uBACjC,QAAS,MAAO,eAAA,CAEpB,EAEMC,GAAkBD,GAAY,CAClC,OAAQA,EAAA,CACN,IAAK,gBAAiB,OAAOE,EAAAA,IAACC,GAAA,CAAW,KAAM,GAAI,EACnD,IAAK,aAAc,OAAOD,EAAAA,IAACE,GAAA,CAAW,KAAM,GAAI,EAChD,IAAK,cAAe,OAAOF,EAAAA,IAACG,GAAA,CAAO,KAAM,GAAI,EAC7C,IAAK,oBAAqB,OAAOH,EAAAA,IAACI,EAAA,CAAM,KAAM,GAAI,EAClD,QAAS,OAAOJ,EAAAA,IAACC,GAAA,CAAW,KAAM,GAAI,CAAA,CAE1C,EAEMI,GAAoB,SAAY,CACpB,MAAM3E,EAAO,YAAA,EAE3BE,EAAef,IAAS,CACtB,GAAGA,EACH,WAAY,GACZ,SAAU,EAAA,EACV,GAEFyF,EAAY,QAAS,iDAAiD,EACtE1E,EAAef,IAAS,CACtB,GAAGA,EACH,WAAY,GACZ,WAAY,OACZ,WAAY,OACZ,SAAU,EAAA,EACV,EAEN,EAiBMgB,GAAmB,MAAOL,EAAM+E,EAAO,SAAW,CACtD,GAAI,CAIF,GAHA3E,MAAwB,CAAE,GAAGf,EAAM,QAAS,IAAO,EAG/CwD,EAAW,CACb,MAAMmC,GAAiBhF,EAAMkB,EAAY,OAAO,EAChDd,MAAwB,CAAE,GAAGf,EAAM,QAAS,IAAQ,EACpD,MACF,CAGA,MAAM4F,EAAW,kBAAkB,KAAK,KAAK,IAAIjF,EAAK,IAAI,GACpD,CAAE,KAAAkF,EAAM,MAAA1F,CAAA,EAAU,MAAM2F,EAAS,QACpC,KAAK,QAAQ,EACb,OAAOF,EAAUjF,CAAI,EAExB,GAAIR,EAAO,MAAMA,EAEjB,KAAM,CAAE,KAAM,CAAE,UAAA4F,CAAA,GAAgBD,EAAS,QACtC,KAAK,QAAQ,EACb,aAAaF,CAAQ,EAKxB,GAHA7E,MAAwB,CAAE,GAAGf,EAAM,SAAU+F,GAAY,EAGrDlE,EAAY,UAAY,oBAAqB,CAE/C,MAAMmE,EAAiB,MAAMC,GAA2BF,EAAWL,CAAI,EACvE3E,EAAef,IAAS,CACtB,GAAGA,EACH,SAAU,KAAK,UAAUgG,EAAgB,KAAM,CAAC,EAChD,QAAS,EAAA,EACT,EACFP,EAAY,UAAW,6CAA6C,CACtE,MAEE,MAAMS,GAAqBH,EAAWL,EAAM7D,EAAY,OAAO,CAGnE,OAAS1B,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,EAGzCqD,EAIHiC,EAAY,QAAS,yBAAyB,GAH9C,QAAQ,IAAI,kCAAkC,EAC9C,MAAME,GAAiBhF,EAAMkB,EAAY,OAAO,GAKlDd,MAAwB,CAAE,GAAGf,EAAM,QAAS,IAAQ,CACtD,CACF,EAEM2E,EAAa,MAAOwB,EAAQ,KAAS,CACzC,GAAI,CACF3E,EAAW,EAAI,EACf,MAAM4E,EAAOD,EAAQ,EAAIjC,GACnBmC,EAAOD,EAAO9B,GACdgC,EAAKD,EAAO/B,GAAmB,EAE/B,CAAE,KAAAuB,EAAM,MAAA1F,EAAO,MAAAoG,CAAA,EAAU,MAAMT,EAClC,KAAK,QAAQ,EACb,OAAO,IAAK,CAAE,MAAO,QAAS,EAC9B,GAAG,UAAW,cAAc,EAC5B,MAAM,aAAc,CAAE,UAAW,EAAA,CAAO,EACxC,MAAMO,EAAMC,CAAE,EAEjB,GAAInG,EAAO,MAAMA,EAEbgG,GACFjF,EAAU2E,GAAQ,EAAE,EACpB1B,GAAc,CAAC,IAEfjD,EAAUlB,GAAQ,CAAC,GAAGA,EAAM,GAAI6F,GAAQ,CAAA,CAAG,CAAC,EAC5C1B,GAAciC,EAAO,CAAC,GAIxB,MAAMI,EAAcL,GAASN,GAAA,YAAAA,EAAM,SAAU,EAAM5E,EAAO,SAAU4E,GAAA,YAAAA,EAAM,SAAU,GACpFxB,GAAiBkC,EAAQC,CAAW,EAEpC,QAAQ,IAAI,mBAAkBX,GAAA,YAAAA,EAAM,SAAU,CAAC,YAAYU,CAAK,GAAG,CACrE,OAASpG,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CsF,EAAY,QAAS,uBAAuB,CAC9C,QAAA,CACEjE,EAAW,EAAK,CAClB,CACF,EAEMiF,GAAiB,SAAY,CAC7B,CAACrC,IAAiB7C,GACtB,MAAMoD,EAAW,EAAK,CACxB,EAEMC,GAAY,SAAY,CAC5B,GAAI,CACF,KAAM,CAAE,KAAAiB,EAAM,MAAA1F,GAAU,MAAM2F,EAC3B,KAAKY,GAAO,KAAK,EACjB,OAAO,uBAAuB,EAC9B,GAAG,UAAW,cAAc,EAC5B,MAAM,aAAc,CAAE,UAAW,GAAO,EAE3C,GAAIvG,EAAO,MAAMA,EACjBiB,EAASyE,GAAQ,EAAE,CACrB,OAAS1F,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CAC7C,CACF,EAEM0E,GAAgB,SAAY,CAChC,GAAI,CACF,KAAM,CAAE,KAAAgB,EAAM,MAAA1F,GAAU,MAAM2F,EAC3B,KAAK,WAAW,EAChB,OAAO,GAAG,EACV,GAAG,UAAW,cAAc,EAC5B,MAAM,aAAc,CAAE,UAAW,GAAO,EAE3C,GAAI3F,EAAO,MAAMA,EACjBmB,EAAauE,GAAQ,EAAE,EACvB,QAAQ,IAAI,qBAAqBA,GAAA,YAAAA,EAAM,SAAU,CAAC,CACpD,OAAS1F,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,EAEMwG,GAAoB,MAAO,GAAM,CACrC,MAAMhG,EAAO,EAAE,OAAO,MAAM,CAAC,EACxBA,GAEL,MAAMK,GAAiBL,EAAM,MAAM,CACrC,EAEMuF,GAAuB,MAAOU,EAAUlB,EAAO,OAAQT,EAAU,kBAAoB,CACzF,GAAI,CACF,MAAM4B,EAAaC,GAAS,SAE5B,GAAI,CAACD,GAAcA,IAAe,gBAAiB,CACjD,QAAQ,KAAK,0DAA0D,EACvE9F,EAAe,CACb,GAAGc,EACH,SAAU,0DACV,QAAS,EAAA,CACV,EACD,MACF,CAGA,IAAIkF,EAAc,GAClB,GAAIlF,EAAY,eAAgB,CAC9B,MAAMmF,EAAO7F,EAAM,SAAU8F,GAAE,KAAOpF,EAAY,cAAc,EAC5DmF,IACFD,EAAc;AAAA;AAAA,gBAAqBC,EAAK,SAAS,GAErD,CAGA,IAAIE,EAAS,GACb,OAAQjC,EAAA,CACN,IAAK,gBACHiC,EAAS;AAAA;AAAA;AAAA;AAAA,EAIjBH,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6DA4CH,MAEF,IAAK,aACHG,EAAS;AAAA;AAAA;AAAA;AAAA,EAIjBH,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAmDH,MAEF,IAAK,cACHG,EAAS;AAAA;AAAA;AAAA;AAAA,EAIjBH,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CA+CH,MAEF,QACEG,EAAS;AAAA;AAAA;AAAA;AAAA,EAIjBH,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6HAAA,CAkBP,QAAQ,IAAI,sBAAsB9B,CAAO,EAAE,EAE3C,MAAMkC,EAAW,MAAM,MAAM,4CAA6C,CACxE,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUN,CAAU,EAAA,EAEvC,KAAM,KAAK,UAAU,CACnB,MAAO,YACP,SAAU,CACR,CACE,KAAM,OACN,QAAS,CACP,CACE,KAAM,OACN,KAAMK,CAAA,EAER,CACE,KAAM,YACN,UAAW,CACT,IAAKN,CAAA,CACP,CACF,CACF,CACF,EAEF,WAAY,GAAA,CACb,CAAA,CACF,EAED,GAAI,CAACO,EAAS,GAAI,CAChB,MAAMC,EAAY,MAAMD,EAAS,KAAA,EACjC,cAAQ,MAAM,sBAAuBA,EAAS,OAAQC,CAAS,EACzD,IAAI,MAAM,uBAAuBD,EAAS,MAAM,EAAE,CAC1D,CAGA,MAAME,GADS,MAAMF,EAAS,KAAA,GACN,QAAQ,CAAC,EAAE,QAAQ,QAGrC,CAAE,MAAOG,GAAc,MAAMxB,EAChC,KAAK,QAAQ,EACb,OAAO,CACN,QAAS,eACT,UAAWc,EACX,QAAS/E,EAAY,gBAAkB,KACvC,SAAUwF,EACV,QAAApC,EACA,YAAaS,EACb,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,EAEC4B,GACF,QAAQ,MAAM,+BAAgCA,CAAS,EAGzDvG,EAAe,CACb,GAAGc,EACH,SAAAwF,EACA,QAAS,EAAA,CACV,EAED,QAAQ,IAAI,oDAAoD3B,CAAI,cAAcT,CAAO,GAAG,EAC5FQ,EAAY,UAAW,0CAA0C,EAGjE,MAAMd,EAAA,CAER,OAASxE,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CsF,EAAY,QAAS,yBAAyB,EAC9C1E,EAAe,CAAE,GAAGc,EAAa,QAAS,GAAO,CACnD,CACF,EAGMoE,GAA6B,MAAOW,EAAUlB,EAAO,SAAW,CACpE,GAAI,CACF,MAAMmB,EAAaC,GAAS,SAE5B,GAAI,CAACD,GAAcA,IAAe,gBAChC,eAAQ,KAAK,0DAA0D,EAChE,CACL,UAAW,CAAE,KAAM,UAAW,WAAY,EAAG,MAAO,UAAW,MAAO,SAAA,EACtE,OAAQ,CAAE,SAAU,UAAW,MAAO,CAAA,EAAI,WAAY,CAAA,EAAI,cAAe,EAAC,EAC1E,SAAU,+DAAA,EAId,MAAMU,EAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAyEvB,QAAQ,IAAI,8EAA8E,EAE1F,MAAMJ,EAAW,MAAM,MAAM,4CAA6C,CACxE,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAiB,UAAUN,CAAU,EAAA,EAEvC,KAAM,KAAK,UAAU,CACnB,MAAO,YACP,SAAU,CACR,CACE,KAAM,OACN,QAAS,CACP,CACE,KAAM,OACN,KAAMU,CAAA,EAER,CACE,KAAM,YACN,UAAW,CACT,IAAKX,CAAA,CACP,CACF,CACF,CACF,EAEF,WAAY,GAAA,CACb,CAAA,CACF,EAED,GAAI,CAACO,EAAS,GAAI,CAChB,MAAMC,EAAY,MAAMD,EAAS,KAAA,EACjC,cAAQ,MAAM,8BAA+BA,EAAS,OAAQC,CAAS,EACjE,IAAI,MAAM,+BAA+BD,EAAS,MAAM,EAAE,CAClE,CAGA,MAAMK,GADS,MAAML,EAAS,KAAA,GACF,QAAQ,CAAC,EAAE,QAAQ,QAG/C,IAAIM,EAAmB,KACvB,GAAI,CAEF,MAAMC,EAAYF,EAAa,MAAM,aAAa,EAClD,GAAIE,EACFD,EAAmB,KAAK,MAAMC,EAAU,CAAC,CAAC,MAE1C,OAAM,IAAI,MAAM,2BAA2B,CAE/C,OAASC,EAAY,CACnB,QAAQ,KAAK,sDAAuDA,CAAU,EAC9EF,EAAmB,CACjB,UAAW,CAAE,KAAM,UAAW,WAAY,EAAG,MAAO,UAAW,MAAO,SAAA,EACtE,OAAQ,CAAE,SAAU,UAAW,MAAO,CAAA,EAAI,WAAY,CAAA,EAAI,cAAe,EAAC,EAC1E,SAAU,CAAE,YAAaD,EAAc,UAAW,qBAAsB,YAAa,SAAA,CAAU,CAEnG,CAGA,KAAM,CAAE,MAAOF,GAAc,MAAMxB,EAChC,KAAK,QAAQ,EACb,OAAO,CACN,QAAS,eACT,UAAWc,EACX,QAAS/E,EAAY,gBAAkB,KACvC,SAAU,KAAK,UAAU4F,CAAgB,EACzC,QAAS,oBACT,YAAa/B,EACb,WAAY,IAAI,KAAA,EAAO,YAAA,CAAY,CACpC,EAEH,OAAI4B,GACF,QAAQ,MAAM,kCAAmCA,CAAS,EAI5D,MAAMM,GAA0BH,EAAkBb,CAAQ,EAE1D,QAAQ,IAAI,kCAAmCa,CAAgB,EACxDA,CAET,OAAStH,EAAO,CACd,cAAQ,MAAM,iCAAkCA,CAAK,EAC/CA,CACR,CACF,EAGMyH,GAA4B,MAAOP,EAAUT,IAAa,CAC9D,GAAI,CAGF,GAFA,QAAQ,IAAI,2DAA2D,EAEnE,CAACS,GAAY,CAACA,EAAS,QAAU,CAACA,EAAS,SAAU,CACvD,QAAQ,KAAK,gDAAgD,EAC7D,MACF,CAEA,MAAMQ,EAAiB,CAAA,EACjBC,EAAY,IAAI,KAAA,EAAO,YAAA,EAG7B,IAAIC,EAAkB1G,EAAU,KAAK2G,GACnCA,EAAE,KAAK,cAAc,SAASX,EAAS,UAAU,KAAK,YAAA,CAAa,GACnEW,EAAE,KAAK,YAAA,EAAc,SAASX,EAAS,UAAU,KAAK,YAAA,CAAa,CAAA,EAGrE,GAAI,CAACU,EAAiB,CAEpB,KAAM,CAAE,KAAME,EAAc,MAAOC,CAAA,EAAmB,MAAMpC,EACzD,KAAK,WAAW,EAChB,OAAO,CACN,KAAM,GAAGuB,EAAS,UAAU,OAAS,SAAS,IAAIA,EAAS,UAAU,IAAI,GACzE,KAAMA,EAAS,UAAU,KACzB,MAAOA,EAAS,UAAU,OAAS,UACnC,MAAOA,EAAS,UAAU,OAAS,UACnC,SAAUA,EAAS,UAAU,UAAY,UACzC,OAAQ,SACR,iBAAkB,KAClB,UAAWT,EACX,YAAa,GACb,WAAYkB,CAAA,CACb,EACA,OAAA,EACA,OAAA,EAEC,CAACI,GAAkBD,IACrBF,EAAkBE,EAClB,QAAQ,IAAI,gCAAiCA,CAAY,EAEzD,MAAMpD,GAAA,EAEV,CAGA,GAAIwC,EAAS,OAAO,WAAa,WAAY,CAC3C,MAAMc,EAAe,CACnB,UAAW,WAAWd,EAAS,UAAU,IAAI,MAAMA,EAAS,SAAS,SAAS,GAC9E,YAAa,mCAAmCA,EAAS,SAAS,WAAW,GAC7E,SAAU,OACV,OAAQ,UACR,SAAU,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAmB,EAAE,YAAA,EACrD,cAAcU,GAAA,YAAAA,EAAiB,KAAMV,EAAS,UAAU,KACxD,UAAWT,EACX,aAAc,GACd,SAAU,WACV,kBAAmBS,EAAS,SAAS,iBACrC,WAAYS,CAAA,EAEdD,EAAe,KAAKM,CAAY,CAClC,CA2CA,GAxCId,EAAS,OAAO,OAASA,EAAS,OAAO,MAAM,OAAS,GAC1DA,EAAS,OAAO,MAAM,QAAQe,GAAc,CAC1C,MAAMpB,EAAO,CACX,UAAW,UAAUK,EAAS,UAAU,IAAI,MAAMe,CAAU,GAC5D,YAAa,WAAWA,CAAU,OAAOf,EAAS,UAAU,IAAI,KAAKA,EAAS,SAAS,WAAW,GAClG,SAAUA,EAAS,OAAO,WAAa,OAAS,OAAS,SACzD,OAAQ,UACR,SAAU,IAAI,KAAK,KAAK,IAAA,EAAQ,MAAuB,EAAE,YAAA,EACzD,cAAcU,GAAA,YAAAA,EAAiB,KAAMV,EAAS,UAAU,KACxD,UAAWT,EACX,aAAc,GACd,SAAUS,EAAS,OAAO,SAC1B,YAAae,EACb,oBAAqBf,EAAS,OAAO,WACrC,WAAYS,CAAA,EAEdD,EAAe,KAAKb,CAAI,CAC1B,CAAC,EAICK,EAAS,SAAS,kBAAoBA,EAAS,SAAS,iBAAiB,OAAS,GACpFA,EAAS,SAAS,iBAAiB,QAAQgB,GAAU,CACnD,MAAMrB,EAAO,CACX,UAAW,qBAAqBqB,CAAM,GACtC,YAAa,6BAA6BA,CAAM,gBAAgBhB,EAAS,UAAU,IAAI,GACvF,SAAU,OACV,OAAQ,UACR,SAAU,IAAI,KAAK,KAAK,IAAA,EAAQ,MAAuB,EAAE,YAAA,EACzD,cAAcU,GAAA,YAAAA,EAAiB,KAAMV,EAAS,UAAU,KACxD,UAAWT,EACX,aAAc,GACd,YAAa,YACb,WAAYkB,CAAA,EAEdD,EAAe,KAAKb,CAAI,CAC1B,CAAC,EAICK,EAAS,SAAS,sBAAwB,MAAO,CACnD,MAAMiB,EAAkB,CACtB,UAAW,yBAAyBjB,EAAS,UAAU,IAAI,GAC3D,YAAa,4BAA4BA,EAAS,UAAU,IAAI,oCAAoCA,EAAS,SAAS,mBAAmB,GACzI,SAAUA,EAAS,SAAS,sBAAwB,OAAS,OAAS,SACtE,OAAQ,UACR,SAAU,IAAI,KAAK,KAAK,IAAA,EAAQ,OAAwB,EAAE,YAAA,EAC1D,cAAcU,GAAA,YAAAA,EAAiB,KAAMV,EAAS,UAAU,KACxD,UAAWT,EACX,aAAc,GACd,iBAAkB,YAClB,gBAAiBS,EAAS,SAAS,eACnC,WAAYS,CAAA,EAEdD,EAAe,KAAKS,CAAe,CACrC,CAGA,GAAIT,EAAe,OAAS,EAAG,CAC7B,KAAM,CAAE,KAAMU,EAAY,MAAOC,GAAc,MAAM1C,EAClD,KAAK,OAAO,EACZ,OAAO+B,CAAc,EACrB,OAAA,EAECW,EACF,QAAQ,MAAM,gCAAiCA,CAAS,GAExD,QAAQ,IAAI,4BAA4BX,EAAe,MAAM,4BAA4B,EACzFpC,EAAY,UAAW,aAAaoC,EAAe,MAAM,kCAAkC,EAG3F,MAAMjD,GAAA,EAEV,CAEA,OAAOiD,CAET,OAAS1H,EAAO,CACd,QAAQ,MAAM,wCAAyCA,CAAK,EAC5DsF,EAAY,QAAS,wCAAwC,CAC/D,CACF,EAGMf,GAAoB,IAAM,CAC9B,GAAI,CACF,MAAM+D,EAAS,aAAa,QAAQ,eAAe,EACnD,GAAIA,EAAQ,CACV,MAAMxH,EAAS,KAAK,MAAMwH,CAAM,EAChClF,EAAiBtC,CAAM,EACvB,QAAQ,IAAI,UAAUA,EAAO,MAAM,iBAAiB,CACtD,CACF,OAASd,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,CACF,EAEMwF,GAAmB,MAAOhF,EAAMsE,EAAU,kBAAoB,CAClE,GAAI,CACF,MAAMyD,EAAS,IAAI,WACnBA,EAAO,OAAUV,GAAM,CACrB,MAAMW,EAAe,CACnB,GAAI,WAAW,KAAK,IAAA,CAAK,GACzB,KAAMX,EAAE,OAAO,OACf,KAAMrH,EAAK,KACX,QAAAsE,EACA,WAAY,IAAI,KAAA,EAAO,YAAA,EACvB,OAAQ,iBACR,YAAa,CAAA,CAAC,EAGV2D,EAAgB,CAAC,GAAGtF,EAAeqF,CAAY,EACrDpF,EAAiBqF,CAAa,EAC9B,aAAa,QAAQ,gBAAiB,KAAK,UAAUA,CAAa,CAAC,EAEnE,QAAQ,IAAI,uBAAwBD,EAAa,EAAE,EACnDlD,EAAY,UAAW,+CAA+C,CACxE,EACAiD,EAAO,cAAc/H,CAAI,CAC3B,OAASR,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClDsF,EAAY,QAAS,8BAA8B,CACrD,CACF,EAEMjB,GAAoB,SAAY,CACpC,GAAIlB,EAAc,SAAW,EAE7B,SAAQ,IAAI,cAAcA,EAAc,MAAM,oBAAoB,EAElE,UAAWqF,KAAgBrF,EACzB,GAAI,CAGF,MAAM5C,EAAO,MADI,MAAM,MAAMiI,EAAa,IAAI,GAClB,KAAA,EACtBhI,EAAO,IAAI,KAAK,CAACD,CAAI,EAAGiI,EAAa,KAAM,CAAE,KAAM,aAAc,EAGjE/C,EAAW,kBAAkB,KAAK,KAAK,IAAI+C,EAAa,IAAI,GAC5D,CAAE,KAAA9C,EAAM,MAAA1F,CAAA,EAAU,MAAM2F,EAAS,QACpC,KAAK,QAAQ,EACb,OAAOF,EAAUjF,CAAI,EAExB,GAAIR,EAAO,MAAMA,EAEjB,KAAM,CAAE,KAAM,CAAE,UAAA4F,CAAA,GAAgBD,EAAS,QACtC,KAAK,QAAQ,EACb,aAAaF,CAAQ,EAGpB+C,EAAa,UAAY,oBAC3B,MAAM1C,GAA2BF,EAAW,MAAM,EAElD,MAAMG,GAAqBH,EAAW,OAAQ4C,EAAa,OAAO,EAGpE,QAAQ,IAAI,2BAA2BA,EAAa,EAAE,EAAE,CAC1D,OAASxI,EAAO,CACd,QAAQ,MAAM,kCAAkCwI,EAAa,EAAE,IAAKxI,CAAK,CAC3E,CAIFoD,EAAiB,CAAA,CAAE,EACnB,aAAa,WAAW,eAAe,EACvCkC,EAAY,UAAW,wCAAwC,EACjE,EAoDMoD,GAAc,MAAOC,GAAY,CACrC,GAAI,CACF,KAAM,CAAE,MAAA3I,CAAA,EAAU,MAAM2F,EACrB,KAAK,QAAQ,EACb,OAAA,EACA,GAAG,KAAMgD,CAAO,EAEnB,GAAI3I,EAAO,MAAMA,EAEjBe,EAAUD,EAAO,OAAO8H,GAASA,EAAM,KAAOD,CAAO,CAAC,EACtD,QAAQ,IAAI,SAASA,CAAO,UAAU,EACtCrD,EAAY,UAAW,eAAe,CACxC,OAAStF,EAAO,CACd,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CsF,EAAY,QAAS,wBAAwB,CAC/C,CACF,EAEMuD,GAAiB3B,GACjBA,EAAS,SAAS,6BAA6B,GAAKA,EAAS,SAAS,wBAAwB,EACzFlC,EAAAA,IAAC8D,IAAY,KAAM,GAAI,MAAO,CAAE,MAAO,sBAAA,EAA0B,EAC/D5B,EAAS,SAAS,yBAAyB,GAAKA,EAAS,SAAS,oBAAoB,EACxFlC,EAAAA,IAAC+D,IAAY,KAAM,GAAI,MAAO,CAAE,MAAO,qBAAA,EAAyB,EAC9D7B,EAAS,SAAS,mBAAmB,GAAKA,EAAS,SAAS,gBAAgB,EAC9ElC,EAAAA,IAACgE,IAAM,KAAM,GAAI,MAAO,CAAE,MAAO,sBAAA,EAA0B,EAE7DhE,EAAAA,IAACiE,GAAA,CAAS,KAAM,GAAI,EAGvBC,GAAkBhC,GAClBA,EAAS,SAAS,6BAA6B,GAAKA,EAAS,SAAS,wBAAwB,EACzF,uBACEA,EAAS,SAAS,yBAAyB,GAAKA,EAAS,SAAS,oBAAoB,EACxF,uBACEA,EAAS,SAAS,mBAAmB,GAAKA,EAAS,SAAS,gBAAgB,EAC9E,uBAEF,yBAGHiC,GAAqB5D,GAClBA,IAAS,SAAWP,MAACoE,EAAA,CAAO,KAAM,EAAA,CAAI,EAAKpE,EAAAA,IAACqE,EAAA,CAAO,KAAM,GAAI,EAGhE/D,EAAc,CAACC,EAAM+D,IAAS,CAClC/H,EAAW,CAAE,KAAAgE,EAAM,KAAA+D,EAAM,EACzB,WAAW,IAAM/H,EAAW,CAAE,KAAM,GAAI,KAAM,GAAI,EAAG,GAAI,CAC3D,EAGMgI,GAAiB,IAAM,CAC3B,GAAI,EAAE,4BAA6B,SAAW,EAAE,sBAAuB,QAAS,CAC9EjE,EAAY,QAAS,kCAAkC,EACvD,MACF,CAEA,MAAMkE,EAAoB,OAAO,mBAAqB,OAAO,wBACvDC,EAAc,IAAID,EAExBC,EAAY,WAAa,GACzBA,EAAY,eAAiB,GAC7BA,EAAY,KAAO,QAEnBA,EAAY,QAAU,IAAM,CAC1B7H,EAAe,EAAI,EACnBE,EAAc,EAAE,CAClB,EAEA2H,EAAY,SAAYC,GAAU,CAChC,IAAIC,EAAkB,GACtB,QAAS,EAAID,EAAM,YAAa,EAAIA,EAAM,QAAQ,OAAQ,IACpDA,EAAM,QAAQ,CAAC,EAAE,UACnBC,GAAmBD,EAAM,QAAQ,CAAC,EAAE,CAAC,EAAE,YAGvCC,IACF7H,EAAc6H,CAAe,EAE7BC,GAAoBD,CAAe,EAEvC,EAEAF,EAAY,MAAQ,IAAM,CACxB7H,EAAe,EAAK,CACtB,EAEA6H,EAAY,QAAWC,GAAU,CAC/B,QAAQ,MAAM,4BAA6BA,EAAM,KAAK,EACtD9H,EAAe,EAAK,CACtB,EAGA,MAAMiI,EAAU,WAAW,IAAM,CAC/BJ,EAAY,KAAA,EACZA,EAAY,MAAA,CACd,EAAG,GAAK,EACRzH,EAAoB6H,CAAO,EAE3BJ,EAAY,MAAA,CACd,EAEMK,GAAgB,IAAM,CACtB/H,IACF,aAAaA,CAAgB,EAC7BC,EAAoB,IAAI,GAE1B,GAAI,CAEE,OAAO,oBACT,OAAO,kBAAkB,KAAA,EACzB,OAAO,kBAAkB,MAAA,EAE7B,MAAgB,CACd,QAAQ,IAAI,6BAA6B,CAC3C,CAEAJ,EAAe,EAAK,EACpB0D,EAAY,OAAQ,sBAAsB,CAC5C,EAEMsE,GAAuBG,GAAY,SACvC,MAAMC,EAAeD,EAAQ,YAAA,EAG7B,GAAIC,EAAa,SAAS,UAAU,GAAKA,EAAa,SAAS,SAAS,EAEtEpJ,EAAef,IAAS,CACtB,GAAGA,EACH,SAAUA,EAAK,SAAW;AAAA;AAAA,qBAA4BkK,CAAA,EACtD,UACOC,EAAa,SAAS,KAAK,GAAKA,EAAa,SAAS,OAAO,EAAG,CAEzE,MAAMC,IAAOC,GAAAC,EAAAJ,EAAQ,MAAM,uBAAuB,IAArC,YAAAI,EAAyC,KAAzC,YAAAD,EAA6C,MAAM,uBAAwB,CAAA,EACxFtH,MAAqB,CAAC,GAAG/C,EAAM,GAAGoK,CAAI,CAAC,CACzC,MAAWD,EAAa,SAAS,SAAS,IAEpCA,EAAa,SAAS,eAAe,EACvCpJ,MAAwB,CAAE,GAAGf,EAAM,QAAS,iBAAkB,EACrDmK,EAAa,SAAS,YAAY,GAAKA,EAAa,SAAS,WAAW,EACjFpJ,MAAwB,CAAE,GAAGf,EAAM,QAAS,cAAe,GAClDmK,EAAa,SAAS,QAAQ,GAAKA,EAAa,SAAS,MAAM,IACxEpJ,MAAwB,CAAE,GAAGf,EAAM,QAAS,eAAgB,EAGlE,EAGMuK,GAAiB,IAAM,CAC3BlI,EAAkB,EAAI,EACtBE,EAAkB,EAAE,CACtB,EAEMiI,GAAkB,IAAM,CAC5BnI,EAAkB,EAAK,EACvBE,EAAkB,EAAE,EAChBG,IACFA,EAAyB,KAAA,EACzBA,EAAyB,MAAA,EAE7B,EAEM+H,GAA2B,IAAM,CACrC,GAAI,EAAE,4BAA6B,SAAW,EAAE,sBAAuB,QAAS,CAC9EhF,EAAY,QAAS,kCAAkC,EACvD,MACF,CAEA,MAAMkE,EAAoB,OAAO,mBAAqB,OAAO,wBACvDC,EAAc,IAAID,EAExBC,EAAY,WAAa,GACzBA,EAAY,eAAiB,GAC7BA,EAAY,KAAO,QAEnBA,EAAY,QAAU,IAAM,CAC1BnH,EAAuB,EAAI,CAC7B,EAEAmH,EAAY,SAAYC,GAAU,CAChC,IAAIC,EAAkB,GACtB,QAASY,EAAIb,EAAM,YAAaa,EAAIb,EAAM,QAAQ,OAAQa,IACpDb,EAAM,QAAQa,CAAC,EAAE,UACnBZ,GAAmBD,EAAM,QAAQa,CAAC,EAAE,CAAC,EAAE,YAGvCZ,GACFvH,EAAkBvC,GAAQA,EAAO8J,EAAkB,GAAG,CAE1D,EAEAF,EAAY,MAAQ,IAAM,CACxBnH,EAAuB,EAAK,CAC9B,EAEAmH,EAAY,QAAWC,GAAU,CAC/B,QAAQ,MAAM,4BAA6BA,EAAM,KAAK,EACtDpH,EAAuB,EAAK,CAC9B,EAEAmH,EAAY,MAAA,EACZjH,GAA4BiH,CAAW,CACzC,EAEMe,GAA0B,IAAM,CAChCjI,IACFA,EAAyB,KAAA,EACzBA,EAAyB,MAAA,EACzBD,EAAuB,EAAK,EAEhC,EAEMmI,GAAsB,IAAM,CAC5BtI,EAAe,SACjBvB,EAAef,IAAS,CACtB,GAAGA,EACH,SAAUA,EAAK,SAAW;AAAA;AAAA,qBAA4BsC,EAAe,KAAA,CAAK,EAC1E,EACFkI,GAAA,EAEJ,EAGMK,GAAwB,SAAY,CACxC,GAAI,CAGA,QAAQ,IAAI,mCAAmC,EAC/C,MAiCJ,OAAS1K,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,CACzD,CACF,EAGAT,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAACsD,EAAY,OACfG,EAAkBlC,CAAM,MACnB,CACL,MAAM6J,EAAW7J,EAAO,mBACtB,QAAAqJ,EAAAvB,EAAM,WAAN,YAAAuB,EAAgB,cAAc,SAAStH,EAAY,YAAA,OACnDqH,EAAAtB,EAAM,UAAN,YAAAsB,EAAe,cAAc,SAASrH,EAAY,gBAAa,EAEjEG,EAAkB2H,CAAQ,CAC5B,CACF,EAAG,CAAC9H,EAAa/B,CAAM,CAAC,EAGtB8J,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAA,CAACpJ,GACAwD,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,SAAA,qEAE/B,EAGD1D,EAAQ,MACP0D,EAAAA,IAAC,MAAA,CAAI,UAAW,WAAW1D,EAAQ,IAAI,GACpC,SAAAA,EAAQ,KACX,EAIFsJ,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAA5F,EAAAA,IAAC,MAAG,SAAA,oCAAiC,EACrCA,EAAAA,IAAC,KAAE,MAAO,CAAE,MAAO,yBAA0B,aAAc,MAAA,EAAU,SAAA,uFAAA,CAErE,EAEEtD,EAAY,gBA8BX,MAAA,CACC,SAAA,CAAAsD,EAAAA,IAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,OAAQ,aAAc,MAAA,EACxD,SAAA4F,EAAAA,KAAC,SAAA,CACC,UAAU,oBACV,QAAS,IAAM,CACb,WAAA,EACAhK,EAAe,CACb,GAAGc,EACH,SAAU,GACV,MAAO,KACP,SAAU,GACV,SAAU,GACV,eAAgB,GAChB,WAAY,OACZ,WAAY,OACZ,QAAS,eAAA,CACV,CACH,EAEA,SAAA,CAAAsD,MAAC6F,IAAE,KAAM,GAAI,MAAO,CAAE,YAAa,QAAA,EAAY,EAAE,QAAA,CAAA,CAAA,EAGrD,EAGAD,EAAAA,KAAC,WAAA,CAAS,UAAU,aAAa,MAAO,CAAE,aAAc,OAAQ,OAAQ,OAAQ,QAAS,GAAA,EACvF,SAAA,CAAA5F,EAAAA,IAAC,SAAA,CAAO,UAAU,aAAa,MAAO,CAAE,QAAS,IAAK,aAAc,QAAA,EAAY,SAAA,gBAAa,EAC7F4F,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,OAAQ,SAAU,MAAA,EACpD,SAAA,CAAAA,OAAC,SAAM,MAAO,CACZ,QAAS,OACT,WAAY,SACZ,IAAK,SACL,OAAQ,UACR,QAAS,cACT,aAAc,MACd,OAAQ,aAAalJ,EAAY,aAAe,SAAW,uBAAyB,qBAAqB,GACzG,gBAAiBA,EAAY,aAAe,SAAW,uBAAyB,cAChF,MAAOA,EAAY,aAAe,SAAW,QAAU,oBACvD,WAAY,eAAA,EAEZ,SAAA,CAAAsD,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,KAAK,aACL,MAAM,SACN,QAAStD,EAAY,aAAe,SACpC,SAAW,GAAMiD,EAAuB,EAAE,OAAO,KAAK,EACtD,MAAO,CAAE,QAAS,MAAA,EAClB,kBAAgB,eAAA,CAAA,QAEjByE,EAAA,CAAO,KAAM,GAAI,cAAY,OAAO,QACpC,OAAA,CAAK,GAAG,gBAAgB,SAAA,aAAU,CAAA,EACrC,EACAwB,OAAC,SAAM,MAAO,CACZ,QAAS,OACT,WAAY,SACZ,IAAK,SACL,OAAQ,UACR,QAAS,cACT,aAAc,MACd,OAAQ,aAAalJ,EAAY,aAAe,OAAS,uBAAyB,qBAAqB,GACvG,gBAAiBA,EAAY,aAAe,OAAS,uBAAyB,cAC9E,MAAOA,EAAY,aAAe,OAAS,QAAU,oBACrD,WAAY,eAAA,EAEZ,SAAA,CAAAsD,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,KAAK,aACL,MAAM,OACN,QAAStD,EAAY,aAAe,OACpC,SAAW,GAAMiD,EAAuB,EAAE,OAAO,KAAK,EACtD,MAAO,CAAE,QAAS,MAAA,EAClB,kBAAgB,aAAA,CAAA,QAEjB0E,EAAA,CAAO,KAAM,GAAI,cAAY,OAAO,QACpC,OAAA,CAAK,GAAG,cAAc,SAAA,cAAW,CAAA,EACpC,CAAA,EACF,CAAA,EACF,EAGAuB,OAAC,OAAI,UAAU,aAAa,MAAO,CAAE,aAAc,MAAA,EACjD,SAAA,CAAA5F,MAAC,QAAA,CAAM,UAAU,aAAa,QAAQ,mBAAmB,SAAA,mBAAgB,EACzE4F,EAAAA,KAAC,SAAA,CACC,GAAG,mBACH,KAAK,mBACL,UAAU,aACV,MAAOlJ,EAAY,QACnB,SAAW,GAAMd,EAAe,CAAE,GAAGc,EAAa,QAAS,EAAE,OAAO,MAAO,EAE3E,SAAA,OAAC,SAAA,CAAO,MAAM,gBAAgB,SAAA,wCAE9B,QACC,SAAA,CAAO,MAAM,aAAa,SAAA,oCAE3B,QACC,SAAA,CAAO,MAAM,cAAc,SAAA,6CAE5B,CAAA,CAAA,CAAA,CACF,EACF,EAGCA,EAAY,YACXkJ,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,aAAc,MAAA,EAC1B,SAAA,CAAA5F,EAAAA,IAAC,QAAA,CACC,IAAKtE,EAAO,SACZ,SAAQ,GACR,YAAW,GACX,MAAO,CACL,MAAO,OACP,SAAU,QACV,aAAc,MACd,OAAQ,+BAAA,CACV,CAAA,EAEFsE,MAAC,UAAO,IAAKtE,EAAO,UAAW,MAAO,CAAE,QAAS,MAAA,EAAU,QAC1D,MAAA,CAAI,MAAO,CAAE,UAAW,MAAA,EACvB,SAAAkK,EAAAA,KAAC,SAAA,CACC,UAAU,MACV,QAASlK,EAAO,aAChB,MAAO,CAAE,YAAa,MAAA,EACtB,MAAM,4BACN,aAAW,4BAEX,SAAA,CAAAsE,EAAAA,IAACoE,EAAA,CAAO,KAAM,GAAI,MAAO,CAAE,YAAa,QAAA,EAAY,cAAY,MAAA,CAAO,EAAE,eAAA,CAAA,CAAA,EAG7E,CAAA,EACF,EAGFwB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAA5F,MAAC,QAAA,CAAM,UAAU,aAAa,QAAQ,qBAAqB,SAAA,0BAAuB,EAClF4F,EAAAA,KAAC,SAAA,CACC,GAAG,qBACH,KAAK,qBACL,UAAU,aACV,MAAOlJ,EAAY,eACnB,SAAW,GAAMd,EAAe,CAAE,GAAGc,EAAa,eAAgB,EAAE,OAAO,MAAO,EAElF,SAAA,OAAC,SAAA,CAAO,MAAM,GAAG,SAAA,mBAAgB,EAChCV,EAAM,IAAI6F,UACR,SAAA,CAAqB,MAAOA,EAAK,GAC/B,SAAA,CAAAA,EAAK,UAAU,KAAGA,EAAK,OAAO,GAAA,CAAA,EADpBA,EAAK,EAElB,CACD,CAAA,CAAA,CAAA,CACH,EACF,EAGC,CAACnF,EAAY,YACZkJ,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAA5F,MAAC,QAAA,CAAM,UAAU,aAAa,QAAQ,oBAAoB,SAAA,eAAY,EACtEA,EAAAA,IAAC,QAAA,CACC,GAAG,oBACH,KAAK,oBACL,KAAK,OACL,OAAO,UACP,SAAUwB,GACV,UAAU,aACV,SAAU9E,EAAY,OAAA,CAAA,CACxB,EACF,EAGDA,EAAY,OACXsD,EAAAA,IAAC,MAAA,CAAI,MAAO,CAAE,UAAW,QACvB,SAAAA,EAAAA,IAAC,MAAA,CACC,IAAK,IAAI,gBAAgBtD,EAAY,KAAK,EAC1C,IAAI,WACJ,MAAO,CAAE,SAAU,OAAQ,UAAW,QAAS,aAAc,KAAA,CAAM,CAAA,EAEvE,EAGDA,EAAY,SACXkJ,OAAC,MAAA,CAAI,MAAO,CAAE,UAAW,OAAQ,UAAW,QAAA,EAC1C,SAAA,CAAA5F,EAAAA,IAACI,EAAA,CAAM,KAAM,GAAI,MAAO,CAAE,UAAW,0BAA2B,YAAa,QAAA,CAAS,CAAG,EAAE,uBACtEP,GAAgBnD,EAAY,OAAO,EAAE,KAAA,EAC5D,EAGDA,EAAY,UACXsD,EAAAA,IAAC,MAAA,CAAI,MAAO,CAAE,UAAW,MAAA,EACvB,SAAAA,EAAAA,IAAC,MAAA,CAAI,MAAO,CACV,gBAAiB,qBACjB,QAAS,OACT,aAAc,MACd,WAAY,WACZ,WAAY,YACZ,SAAU,SACV,OAAQ,gCAAA,EAEP,SAAAtD,EAAY,QAAA,CACf,EACF,CAAA,EAEJ,EAlOAkJ,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,OAAQ,SAAU,MAAA,EACnD,SAAA,CAAAlK,EAAO,aACNkK,EAAAA,KAAC,SAAA,CACC,UAAU,MACV,QAAS,IAAM,CACbjG,EAAuB,QAAQ,EAC/BU,GAAA,CACF,EACA,MAAM,2BACN,aAAW,2BAEX,SAAA,CAAAL,EAAAA,IAACoE,EAAA,CAAO,KAAM,GAAI,MAAO,CAAE,YAAa,QAAA,EAAY,cAAY,MAAA,CAAO,EAAE,YAAA,CAAA,CAAA,EAI7EwB,EAAAA,KAAC,SAAA,CACC,UAAU,MACV,QAAS,IAAM,CACbjG,EAAuB,MAAM,EAC7B/D,MAAwB,CAAE,GAAGf,EAAM,SAAU,IAAO,CACtD,EACA,MAAM,yBACN,aAAW,yBAEX,SAAA,CAAAmF,EAAAA,IAACqE,EAAA,CAAO,KAAM,GAAI,MAAO,CAAE,YAAa,QAAA,EAAY,cAAY,MAAA,CAAO,EAAE,aAAA,CAAA,CAAA,CAE3E,EACF,CAuMA,EAEJ,EAGAuB,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,WAAY,SAAU,aAAc,MAAA,EAClG,SAAA,CAAA5F,EAAAA,IAAC,MAAG,SAAA,iBAAc,EAClB4F,EAAAA,KAAC,SAAA,CACC,UAAU,oBACV,QAASpG,EACT,SAAUpD,EACV,MAAM,iBACN,aAAW,iBAEX,SAAA,CAAA4D,EAAAA,IAAC8F,GAAA,CAAU,KAAM,GAAI,MAAO,CAAE,YAAa,QAAA,EAAY,cAAY,MAAA,CAAO,EAAE,SAAA,CAAA,CAAA,CAE9E,EACF,EAEC1J,GAAWN,EAAO,SAAW,QAC3B,OAAI,UAAU,UAAU,SAAA,oBAAiB,EACxCA,EAAO,SAAW,QACnB,IAAA,CAAE,MAAO,CAAE,UAAW,SAAU,MAAO,wBAAA,EAA4B,SAAA,8DAAA,CAEpE,EAEAkE,MAAC,OAAI,MAAO,CAAE,QAAS,OAAQ,cAAe,SAAU,IAAK,MAAA,EAC1D,SAAAlE,EAAO,IAAI8H,GAAS,CACnB,MAAMmC,EAAa/J,EAAM,QAAU8F,EAAE,KAAO8B,EAAM,OAAO,EAEzD,OACEgC,EAAAA,KAAC,OAAmB,MAAO,CACzB,OAAQ,gCACR,aAAc,MACd,QAAS,OACT,gBAAiB,oBAAA,EAEjB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,WAAY,aAAc,aAAc,MAAA,EACtG,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,KAAM,CAAA,EAClB,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,WAAY,SAAU,IAAK,SAAU,aAAc,QAAA,EAC/E,SAAA,CAAA/B,GAAcD,EAAM,QAAQ,EAC7B5D,MAAC,QAAK,MAAO,CACX,WAAY,MACZ,MAAOkE,GAAeN,EAAM,QAAQ,CAAA,EACnC,SAAA,gBAEH,QACC,OAAA,CAAK,MAAO,CAAE,SAAU,SAAU,MAAO,wBAAA,EACvC,aAAI,KAAKA,EAAM,UAAU,EAAE,mBAAA,EAC9B,EACCA,EAAM,SACLgC,EAAAA,KAAC,OAAA,CAAK,MAAO,CACX,QAAS,OACT,WAAY,SACZ,IAAK,UACL,SAAU,SACV,WAAY,SACZ,QAAS,iBACT,gBAAiB,uBACjB,MAAO,QACP,aAAc,KAAA,EAEb,SAAA,CAAA7F,GAAe6D,EAAM,OAAO,EAC5B/D,GAAgB+D,EAAM,OAAO,CAAA,EAChC,EAEDA,EAAM,aACLgC,EAAAA,KAAC,OAAA,CAAK,MAAO,CACX,QAAS,OACT,WAAY,SACZ,IAAK,UACL,SAAU,SACV,MAAO,uBACP,WAAY,QAAA,EAEX,SAAA,CAAAzB,GAAkBP,EAAM,WAAW,EACnCA,EAAM,WAAA,EACT,CAAA,EAEJ,EAECmC,GACCH,EAAAA,KAAC,MAAA,CAAI,MAAO,CACV,SAAU,SACV,MAAO,uBACP,aAAc,QAAA,EACb,SAAA,CAAA,iBACcG,EAAW,SAAA,EAC5B,CAAA,EAEJ,EAEA/F,EAAAA,IAAC,SAAA,CACC,UAAU,iBACV,QAAS,IAAM0D,GAAYE,EAAM,EAAE,EACnC,MAAO,CAAE,QAAS,iBAAkB,SAAU,QAAA,EAC9C,MAAM,eACN,aAAW,eAEX,eAACoC,GAAA,CAAO,KAAM,GAAI,cAAY,OAAO,CAAA,CAAA,CACvC,EACF,EAEAJ,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,OAAQ,aAAc,MAAA,EACxD,SAAA,CAAA5F,EAAAA,IAAC,MAAA,CACC,IAAK4D,EAAM,UACX,IAAI,UACJ,MAAO,CACL,MAAO,QACP,OAAQ,QACR,UAAW,QACX,aAAc,MACd,OAAQ,+BAAA,CACV,CAAA,EAGF5D,EAAAA,IAAC,OAAI,MAAO,CAAE,KAAM,CAAA,EAClB,SAAAA,EAAAA,IAAC,MAAA,CAAI,MAAO,CACV,gBAAiB,QACjB,QAAS,UACT,aAAc,MACd,WAAY,WACZ,WAAY,YACZ,SAAU,UACV,UAAW,QACX,SAAU,OACV,OAAQ,gCAAA,EAEP,SAAA4D,EAAM,QAAA,CACT,EACF,CAAA,EACF,CAAA,CAAA,EApGQA,EAAM,EAqGhB,CAEJ,CAAC,EACH,EAID3E,IAAiBnD,EAAO,OAAS,GAChCkE,EAAAA,IAAC,SAAA,CACC,QAASsB,GACT,SAAUlF,EACV,UAAU,kBACV,MAAO,CACL,QAAS,QACT,OAAQ,YACR,QAAS,eACT,SAAU,MAAA,EAGX,WAAU,aAAe,kBAAA,CAAA,CAC5B,EAEJ,EAGAwJ,OAAC,OAAI,MAAO,CACV,UAAW,OACX,QAAS,OACT,gBAAiBjJ,EAAc,uBAAyB,qBACxD,aAAc,MACd,OAAQA,EAAc,iCAAmC,gCACzD,UAAW,QAAA,EAEX,SAAA,CAAAiJ,OAAC,MAAG,MAAO,CACT,aAAc,SACd,MAAOjJ,EAAc,QAAU,uBAC/B,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,IAAK,QAAA,EAEL,SAAA,CAAAqD,EAAAA,IAACiG,EAAA,CAAI,KAAM,GAAI,EAAE,yBAAA,EAEnB,EAGAL,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,OAAQ,eAAgB,SAAU,aAAc,MAAA,EAClF,SAAA,CAAA5F,EAAAA,IAAC,SAAA,CACC,QAASrD,EAAcmI,GAAgBP,GACvC,MAAO,CACL,QAAS,YACT,aAAc,OACd,OAAQ,OACR,gBAAiB5H,EAAc,UAAY,uBAC3C,MAAO,QACP,OAAQ,UACR,SAAU,SACV,WAAY,MACZ,QAAS,OACT,WAAY,SACZ,IAAK,SACL,WAAY,gBACZ,UAAWA,EAAc,kCAAoC,4BAC7D,UAAWA,EAAc,oBAAsB,MAAA,EAGhD,WACCiJ,EAAAA,KAAAM,EAAAA,SAAA,CACE,SAAA,CAAAlG,EAAAA,IAACmG,GAAA,CAAO,KAAM,GAAI,EAAE,gBAAA,EAEtB,EAEAP,EAAAA,KAAAM,EAAAA,SAAA,CACE,SAAA,CAAAlG,EAAAA,IAACiG,EAAA,CAAI,KAAM,GAAI,EAAE,aAAA,EAEnB,CAAA,CAAA,EAIJL,EAAAA,KAAC,SAAA,CACC,QAASR,GACT,MAAO,CACL,QAAS,YACT,aAAc,OACd,OAAQ,iCACR,gBAAiB,QACjB,MAAO,uBACP,OAAQ,UACR,SAAU,SACV,WAAY,MACZ,QAAS,OACT,WAAY,SACZ,IAAK,SACL,WAAY,eAAA,EAGd,SAAA,CAAApF,EAAAA,IAACoG,GAAA,CAAc,KAAM,GAAI,EAAE,aAAA,CAAA,CAAA,CAE7B,EACF,EAGCzJ,GACCqD,EAAAA,IAAC,MAAA,CAAI,MAAO,CACV,MAAO,QACP,SAAU,SACV,aAAc,SACd,UAAW,SACX,WAAY,KAAA,EACX,SAAA,gDAEH,EAIDnD,GACC+I,EAAAA,KAAC,MAAA,CAAI,MAAO,CACV,UAAW,SACX,QAAS,SACT,gBAAiB,QACjB,aAAc,MACd,SAAU,SACV,MAAO,oBACP,UAAW,MAAA,EAEX,SAAA,CAAA5F,EAAAA,IAAC,UAAO,SAAA,YAAS,EAAS,IAAEnD,CAAA,EAC9B,CAAA,EAEJ,EAGAmD,EAAAA,IAAC,MAAA,CAAI,MAAO,CAAE,UAAW,OAAQ,QAAS,OAAQ,gBAAiB,qBAAsB,aAAc,KAAA,EACrG,SAAA4F,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,WAAY,SAAU,aAAc,MAAA,EAClG,SAAA,CAAA5F,EAAAA,IAAC,KAAA,CAAG,MAAO,CAAE,MAAO,uBAAwB,OAAQ,CAAA,EAAK,SAAA,kBAAA,CAAgB,EACzE4F,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,SAAU,WAAY,QAAA,EACxD,SAAA,CAAA5F,EAAAA,IAACqG,GAAA,CAAO,KAAM,GAAI,EAClBrG,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOnC,EACP,SAAW,GAAMC,GAAe,EAAE,OAAO,KAAK,EAC9C,YAAY,0CACZ,MAAO,CACL,QAAS,SACT,aAAc,MACd,OAAQ,gCACR,SAAU,SACV,SAAU,OAAA,CACZ,CAAA,CACF,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAGA8H,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,UAAW,OAAQ,QAAS,OAAQ,gBAAiB,qBAAsB,aAAc,KAAA,EACrG,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,WAAY,SAAU,aAAc,MAAA,EAClG,SAAA,CAAA5F,EAAAA,IAAC,KAAA,CAAG,MAAO,CAAE,MAAO,uBAAwB,OAAQ,CAAA,EAAK,SAAA,yBAAA,CAAuB,EAChF4F,EAAAA,KAAC,SAAA,CACC,QAASF,GACT,MAAO,CACL,QAAS,cACT,aAAc,MACd,OAAQ,gCACR,gBAAiB,uBACjB,MAAO,QACP,OAAQ,UACR,QAAS,OACT,WAAY,SACZ,IAAK,QAAA,EAGP,SAAA,CAAA1F,EAAAA,IAACI,EAAA,CAAM,KAAM,GAAI,EAAE,oBAAA,CAAA,CAAA,CAErB,EACF,EAEC3C,EAAc,OAAS,GACtBuC,EAAAA,IAAC,OAAI,MAAO,CAAE,QAAS,OAAQ,cAAe,SAAU,IAAK,UAC1D,SAAAvC,EAAc,IAAI,CAAC6I,EAAYC,IAC9BX,EAAAA,KAAC,MAAA,CAAgB,MAAO,CACtB,QAAS,UACT,gBAAiB,QACjB,aAAc,MACd,OAAQ,+BAAA,EAER,SAAA,CAAA5F,EAAAA,IAAC,MAAA,CAAI,MAAO,CAAE,WAAY,MAAO,aAAc,SAAA,EAAc,SAAAsG,EAAW,WAAW,EACnFtG,EAAAA,IAAC,MAAA,CAAI,MAAO,CAAE,SAAU,SAAU,MAAO,wBAAA,EAA6B,SAAAsG,EAAW,OAAO,CAAA,CAAA,EAPhFC,CAQV,CACD,EACH,CAAA,EAEJ,EAGCtJ,IACC+C,EAAAA,IAAC,MAAA,CAAI,MAAO,CACV,SAAU,QACV,IAAK,EACL,KAAM,EACN,MAAO,EACP,OAAQ,EACR,gBAAiB,qBACjB,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,OAAQ,GAAA,EAER,SAAA4F,EAAAA,KAAC,MAAA,CAAI,MAAO,CACV,gBAAiB,QACjB,QAAS,OACT,aAAc,OACd,MAAO,MACP,SAAU,QACV,UAAW,gCAAA,EAEX,SAAA,CAAA5F,EAAAA,IAAC,KAAA,CAAG,MAAO,CAAE,aAAc,OAAQ,MAAO,sBAAA,EAA0B,SAAA,4BAAA,CAA0B,QAE7F,MAAA,CAAI,MAAO,CAAE,aAAc,MAAA,EAC1B,SAAAA,EAAAA,IAAC,WAAA,CACC,MAAO7C,EACP,SAAW,GAAMC,EAAkB,EAAE,OAAO,KAAK,EACjD,YAAY,uCACZ,MAAO,CACL,MAAO,OACP,UAAW,QACX,QAAS,UACT,aAAc,MACd,OAAQ,gCACR,SAAU,SACV,OAAQ,UAAA,CACV,CAAA,EAEJ,EAEAwI,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,SAAU,eAAgB,QAAA,EAC5D,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAASvI,EAAsBmI,GAA0BF,GACzD,MAAO,CACL,QAAS,iBACT,aAAc,MACd,OAAQ,OACR,gBAAiBjI,EAAsB,UAAY,uBACnD,MAAO,QACP,OAAQ,UACR,QAAS,OACT,WAAY,SACZ,IAAK,QAAA,EAGN,SAAA,CAAAA,EAAsB2C,EAAAA,IAACmG,IAAO,KAAM,EAAA,CAAI,EAAKnG,EAAAA,IAACiG,EAAA,CAAI,KAAM,GAAI,EAC5D5I,EAAsB,OAAS,QAAQ,YAAA,CAAA,CAAA,EAG1C2C,EAAAA,IAAC,SAAA,CACC,QAASyF,GACT,SAAU,CAACtI,EAAe,KAAA,EAC1B,MAAO,CACL,QAAS,iBACT,aAAc,MACd,OAAQ,OACR,gBAAiBA,EAAe,KAAA,EAAS,uBAAyB,yBAClE,MAAO,QACP,OAAQA,EAAe,KAAA,EAAS,UAAY,aAAA,EAE/C,SAAA,iBAAA,CAAA,EAID6C,EAAAA,IAAC,SAAA,CACC,QAASqF,GACT,MAAO,CACL,QAAS,iBACT,aAAc,MACd,OAAQ,gCACR,gBAAiB,QACjB,MAAO,oBACP,OAAQ,SAAA,EAEX,SAAA,QAAA,CAAA,CAED,EACF,CAAA,CAAA,CACF,CAAA,CACF,EAGFrF,EAAAA,IAAC,QAAA,CAAM,IAAG,GAAE,SAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA,CAKV,CAAA,EACJ,CAEJ"}