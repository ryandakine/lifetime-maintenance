import{j as e}from"./main-D2OIwsnq.js";import{r as i}from"./vendor-B6114-rA.js";import{d as q}from"./redux-CQk40qEf.js";import"./ui-7hvmghxF.js";const L=()=>{var _,v,f,b,N,w,P,k,A;const[u,x]=i.useState(!1),[c,d]=i.useState(null),[j,g]=i.useState(null),[a,h]=i.useState(null),[o,y]=i.useState({location:"",issue:"",urgency:"normal"}),m=i.useRef(null);q();const C=s=>{const n=s.target.files[0];if(n){d(n);const r=new FileReader;r.onload=t=>{g(t.target.result)},r.readAsDataURL(n)}},p=s=>{y({...o,[s.target.name]:s.target.value})},D=async()=>{if(!c){alert("Please upload a photo first");return}x(!0);try{const s=new FormData;s.append("photo",c),s.append("location",o.location||"Gym Equipment"),s.append("issue",o.issue||"Maintenance check"),s.append("urgency",o.urgency||"normal");const n="http://localhost:3000/api/workflow/analyze-photo";console.log("ðŸ” Sending photo for AI analysis to local backend...");const r=await fetch(n,{method:"POST",body:s});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const t=await r.json();if(t.success)h(t.data),console.log("âœ… Photo analysis completed successfully"),alert("Photo analyzed successfully! Check the results below.");else throw new Error(t.error||"Analysis failed")}catch(s){console.error("Analysis error:",s),console.log("âš ï¸ Using demo analysis due to API error:",s.message),h({equipment_type:"Treadmill",brand:"Life Fitness",model:"95T",issues_detected:["Belt wear","Motor noise"],severity:"medium",time_estimate:"2-3 hours",cost_estimate:150,maintenance_recommendations:["Replace worn belt","Lubricate motor bearings","Check electrical connections"],parts_needed:[{part_number:"GR123",description:"Treadmill Belt",price:89.99},{part_number:"GR456",description:"Motor Bearings",price:45.5}]}),alert("Demo analysis loaded (local API unavailable). Check the results below.")}finally{x(!1)}},S=async()=>{var s,n,r,t,R;if(!a){alert("Please analyze a photo first");return}try{const l={po_number:((s=a.purchase_order)==null?void 0:s.po_number)||"PO-"+Date.now(),total_cost:((n=a.purchase_order)==null?void 0:n.total)||0,parts_count:((t=(r=a.parts_lookup)==null?void 0:r.grainger_parts)==null?void 0:t.length)||0,estimated_time:((R=a.ai_analysis)==null?void 0:R.time_estimate)||"Unknown"};alert(`Order Generated!
PO Number: ${l.po_number}
Total Cost: $${l.total_cost}
Parts: ${l.parts_count}
Time: ${l.estimated_time}`)}catch(l){console.error("Order generation error:",l),alert("Failed to generate order. Please try again.")}},T=()=>{d(null),g(null),h(null),y({location:"",issue:"",urgency:"normal"}),m.current&&(m.current.value="")};return e.jsxs("div",{className:"visual-maintenance",children:[e.jsxs("div",{className:"maintenance-header",children:[e.jsx("h2",{children:"ðŸ”§ Visual Maintenance Assistant"}),e.jsx("p",{children:"Upload equipment photos for AI-powered maintenance analysis"})]}),e.jsxs("div",{className:"maintenance-container",children:[e.jsxs("div",{className:"upload-section",children:[e.jsx("h3",{children:"ðŸ“¸ Equipment Photo"}),e.jsxs("div",{className:"photo-upload-area",children:[e.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:C,className:"photo-input"}),j&&e.jsxs("div",{className:"photo-preview",children:[e.jsx("img",{src:j,alt:"Equipment preview"}),e.jsx("button",{onClick:()=>d(null),className:"remove-photo",children:"âœ• Remove"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h3",{children:"ðŸ“‹ Maintenance Details"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Equipment Location:"}),e.jsx("input",{type:"text",name:"location",value:o.location,onChange:p,placeholder:"e.g., Cardio Room, Weight Room, Pool Area"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reported Issue:"}),e.jsx("textarea",{name:"issue",value:o.issue,onChange:p,placeholder:"Describe the problem or maintenance need...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Urgency Level:"}),e.jsxs("select",{name:"urgency",value:o.urgency,onChange:p,children:[e.jsx("option",{value:"low",children:"Low - Routine maintenance"}),e.jsx("option",{value:"normal",children:"Normal - Standard repair"}),e.jsx("option",{value:"high",children:"High - Equipment down"}),e.jsx("option",{value:"critical",children:"Critical - Safety issue"})]})]})]})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:D,disabled:!c||u,className:"analyze-btn",children:u?"ðŸ” Analyzing...":"ðŸ” Analyze Photo"}),a&&e.jsx("button",{onClick:S,className:"order-btn",children:"ðŸ“‹ Generate Order"}),e.jsx("button",{onClick:T,className:"reset-btn",children:"ðŸ”„ Reset"})]}),a&&e.jsxs("div",{className:"analysis-results",children:[e.jsx("h3",{children:"ðŸ“Š AI Analysis Results"}),e.jsxs("div",{className:"results-grid",children:[e.jsxs("div",{className:"result-card",children:[e.jsx("h4",{children:"Equipment Analysis"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",((_=a.ai_analysis)==null?void 0:_.equipment_type)||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Damage:"})," ",((v=a.ai_analysis)==null?void 0:v.damage_assessment)||"No damage detected"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Safety:"})," ",((f=a.ai_analysis)==null?void 0:f.safety_concerns)||"No safety concerns"]})]}),e.jsxs("div",{className:"result-card",children:[e.jsx("h4",{children:"Maintenance Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time Estimate:"})," ",((b=a.ai_analysis)==null?void 0:b.time_estimate)||"Unknown"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tools Needed:"})," ",((N=a.ai_analysis)==null?void 0:N.tools_needed)||"Standard tools"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Parts Required:"})," ",((P=(w=a.parts_lookup)==null?void 0:w.grainger_parts)==null?void 0:P.length)||0," items"]})]}),a.purchase_order&&e.jsxs("div",{className:"result-card",children:[e.jsx("h4",{children:"Purchase Order"}),e.jsxs("p",{children:[e.jsx("strong",{children:"PO Number:"})," ",a.purchase_order.po_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Cost:"})," $",a.purchase_order.total]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vendor:"})," ",a.purchase_order.vendor]})]})]}),((A=(k=a.parts_lookup)==null?void 0:k.grainger_parts)==null?void 0:A.length)>0&&e.jsxs("div",{className:"parts-list",children:[e.jsx("h4",{children:"ðŸ› ï¸ Required Parts"}),e.jsx("div",{className:"parts-grid",children:a.parts_lookup.grainger_parts.map((s,n)=>e.jsxs("div",{className:"part-item",children:[e.jsx("p",{children:e.jsx("strong",{children:s.part_number})}),e.jsx("p",{children:s.description}),e.jsxs("p",{className:"price",children:["$",s.price]}),e.jsx("p",{className:"availability",children:s.availability})]},n))})]})]})]})]})};export{L as default};
//# sourceMappingURL=VisualMaintenance-DwKgAGwR.js.map
