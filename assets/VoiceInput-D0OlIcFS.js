import{a as D,b as M,j as o}from"./main-D2OIwsnq.js";import{r as s}from"./vendor-B6114-rA.js";import{d as H}from"./redux-CQk40qEf.js";import"./ui-7hvmghxF.js";const X=()=>{const[r,m]=s.useState(!1),[y,l]=s.useState(""),[w,E]=s.useState(0),[S,u]=s.useState(""),[v,C]=s.useState(!1),[N,U]=s.useState([]),[c,j]=s.useState(!1),[R,n]=s.useState(""),i=s.useRef(null),T=H(),h={"go to dashboard":()=>window.location.hash="#dashboard","go to tasks":()=>window.location.hash="#tasks","go to photos":()=>window.location.hash="#photos","go to shopping":()=>window.location.hash="#shopping","go to maintenance":()=>window.location.hash="#maintenance","create task":e=>$(e),"complete task":e=>z(e),"delete task":e=>F(e),"mark task as done":e=>z(e),"add to shopping list":e=>g(e),buy:e=>g(e),purchase:e=>g(e),"take photo":()=>x(),"capture image":()=>x(),"document equipment":()=>x(),"stop listening":()=>k(),"start listening":()=>f(),help:()=>b(),"what can I say":()=>b(),"check equipment":e=>q(e),"schedule maintenance":e=>O(e),"report issue":e=>V(e)};s.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;i.current=new e,i.current.continuous=!0,i.current.interimResults=!0,i.current.lang="en-US",i.current.onstart=()=>{m(!0),u(""),n("Listening...")},i.current.onresult=t=>{let a="",d="";for(let p=t.resultIndex;p<t.results.length;p++){const A=t.results[p][0].transcript,B=t.results[p][0].confidence;t.results[p].isFinal?(a+=A,E(B)):d+=A}l(a||d),a&&I(a.toLowerCase())},i.current.onerror=t=>{console.error("Speech recognition error:",t.error),u(`Voice recognition error: ${t.error}`),m(!1),n("Error occurred")},i.current.onend=()=>{m(!1),n("Stopped listening"),c&&setTimeout(()=>{f()},1e3)}}else u("Speech recognition not supported in this browser")},[c]);const I=s.useCallback(async e=>{C(!0),n("Processing command...");try{const t=Object.keys(h).find(d=>e.includes(d));if(t){const d=e.replace(t,"").trim();h[t](d),n(`Executed: ${t}`);return}const a=await W(e);a.action?(L(a),n(`AI processed: ${a.action}`)):n('Command not recognized. Try saying "help" for available commands.')}catch(t){console.error("Error processing voice command:",t),u("Failed to process command"),n("Processing failed")}finally{C(!1)}},[]),W=async e=>{try{const t=await fetch("/api/claude/process-voice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:e,context:{currentTab:window.location.hash.replace("#",""),availableActions:Object.keys(h)}})});if(!t.ok)throw new Error("Claude API request failed");return await t.json()}catch(t){return console.error("Claude API error:",t),{action:null,error:t.message}}},L=e=>{switch(e.action){case"create_task":$(e.params);break;case"add_shopping_item":g(e.params);break;case"navigate":window.location.hash=`#${e.params}`;break;case"take_photo":x();break;default:console.log("Unknown action from Claude:",e.action)}},$=e=>{if(!e){n("Please provide a task description");return}const t={id:Date.now(),title:e,description:`Voice-created task: ${e}`,status:"pending",priority:"medium",category:"voice",creation_date:new Date().toISOString(),voice_created:!0};T(D(t)),n(`Task created: ${e}`),l("")},z=e=>{n(`Task ${e} marked as complete`)},F=e=>{n(`Task ${e} deleted`)},g=e=>{if(!e){n("Please provide an item name");return}const t={id:Date.now(),name:e,category:"voice",quantity:1,priority:"medium",voice_created:!0};T(M(t)),n(`Added to shopping: ${e}`),l("")},x=()=>{const e=document.querySelector("[data-photo-capture]");e?(e.click(),n("Photo capture triggered")):n("Photo capture not available")},q=e=>{n(`Checking equipment: ${e}`)},O=e=>{n(`Scheduling maintenance for: ${e}`)},V=e=>{n(`Issue reported: ${e}`)},b=()=>{const e=Object.keys(h).map(t=>`"${t}"`).join(", ");n(`Available commands: ${e}`)},f=()=>{i.current&&i.current.start()},k=()=>{i.current&&i.current.stop(),j(!1)},_=()=>{j(!c),!c&&!r&&f()},P=()=>{"vibrate"in navigator&&navigator.vibrate(50)};return s.useEffect(()=>{const e=()=>{document.hidden&&r&&k()};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[r]),o.jsxs("div",{className:"voice-input-container",style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,background:"white",borderRadius:"20px",padding:"20px",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",minWidth:"300px",maxWidth:"400px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"15px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:r?"#4CAF50":"#ccc",animation:r?"pulse 1.5s infinite":"none"}}),o.jsx("span",{style:{fontSize:"14px",fontWeight:"bold",color:r?"#4CAF50":"#666"},children:r?"Listening":"Voice Off"})]}),w>0&&o.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Confidence: ",Math.round(w*100),"%"]})]}),y&&o.jsxs("div",{style:{background:"#f5f5f5",padding:"10px",borderRadius:"8px",marginBottom:"15px",fontSize:"14px",minHeight:"40px",wordWrap:"break-word"},children:['"',y,'"']}),R&&o.jsx("div",{style:{background:"#e3f2fd",padding:"8px 12px",borderRadius:"6px",marginBottom:"15px",fontSize:"13px",color:"#1976d2"},children:R}),S&&o.jsx("div",{style:{background:"#ffebee",padding:"8px 12px",borderRadius:"6px",marginBottom:"15px",fontSize:"13px",color:"#d32f2f"},children:S}),o.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[o.jsxs("button",{onClick:()=>{r?k():f(),P()},disabled:v,style:{background:r?"#f44336":"#4CAF50",color:"white",border:"none",padding:"10px 20px",borderRadius:"25px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",flex:1,minWidth:"120px"},children:[r?"Stop":"Start"," Listening"]}),o.jsx("button",{onClick:_,style:{background:c?"#ff9800":"#2196F3",color:"white",border:"none",padding:"10px 15px",borderRadius:"25px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:c?"Continuous":"Auto"}),o.jsx("button",{onClick:()=>{b(),P()},style:{background:"#9c27b0",color:"white",border:"none",padding:"10px 15px",borderRadius:"25px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"Help"})]}),v&&o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"10px",gap:"8px"},children:[o.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid #f3f3f3",borderTop:"2px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}}),o.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"Processing..."})]}),o.jsxs("div",{style:{marginTop:"15px",paddingTop:"15px",borderTop:"1px solid #eee"},children:[o.jsx("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:"Quick Commands:"}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"5px"},children:['"create task"','"take photo"','"go to tasks"','"help"'].map(e=>o.jsx("button",{onClick:()=>{l(e.replace(/"/g,"")),I(e.replace(/"/g,""))},style:{background:"#f0f0f0",border:"1px solid #ddd",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",cursor:"pointer",color:"#333"},children:e},e))})]}),o.jsx("style",{children:`
        @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.5; }
          100% { opacity: 1; }
        }
        
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
          .voice-input-container {
            bottom: 10px;
            right: 10px;
            left: 10px;
            max-width: none;
          }
        }
      `})]})};export{X as default};
//# sourceMappingURL=VoiceInput-D0OlIcFS.js.map
